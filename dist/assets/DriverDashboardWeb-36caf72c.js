import{j as e,t as k,r as m,f as pe,g as he,e as ge,u as xe}from"./vendor-f48e548e.js";import{F as M,a as fe}from"./axios-aa9cae93.js";import{F as z,G as ie,I as ae,a as B,b as ue,c as be,d as ve,e as U,B as G}from"./index.esm-a6c8702e.js";import{M as oe,a as ye,b as je,c as we,R as Ne}from"./ResponsiveTable-f305baa9.js";import{e as Se,T as Ce,a as Te,t as ke,b as H,c as J,d as K,f as q,g as Z,h as Q,i as O}from"./Tab-a45b3d1d.js";import{u as Ie,i as Le,L as De,a as ze,b as Pe,c as Ee,d as Me,e as Ae,f as Oe}from"./installSVGRenderer-7788c1a1.js";import{s as Re,a as Fe,u as We,_ as $,b as _,c as re,g as _e,d as $e,e as Be,f as Ue,h as Ge,i as He,T as Je,C as Ke}from"./assertThisInitialized-46084dcb.js";import"./index-41ce01ef.js";import"./react-toastify.esm-81104cc6.js";import"./react-is.production.min-3a7c3723.js";import"./useTheme-8d3c7519.js";import"./createSvgIcon-22bfe507.js";function qe(t){return e.jsx("div",{className:"d-flex align-items-center justify-content-center my-1 flex-wrap",children:e.jsxs("div",{className:"row my-1 d-flex justify-content-center align-items-stretch",style:{width:"100%"},children:[e.jsxs("div",{className:"col-5 col-md-2 px-2 rounded-3 py-3 mt-1 mx-2 mb-2",style:{minWidth:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"rgb(22 101 52 / 11%)",borderRadius:"10px",display:"inline-block"},children:e.jsx(M,{className:"",style:{fontSize:"22px",color:"rgb(22 101 52)"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[z(t.drivingTime)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"hrs"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:k("Driving Time")})]}),e.jsxs("div",{className:"col-5 col-md-2 px-2 rounded-3 py-3 mt-1 mx-2 mb-2",style:{minWidth:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"#FECACA",borderRadius:"10px",display:"inline-block"},children:e.jsx(oe,{className:"",style:{fontSize:"22px",color:"#DC2626"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[z(t.distanceCovered)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"km"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:k("Distance")})]}),e.jsxs("div",{className:"col-5 col-md-2 px-2 rounded-3 py-3 mt-1 mx-2 mb-2",style:{minWidth:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"rgb(22 101 52 / 11%)",borderRadius:"10px",display:"inline-block"},children:e.jsx(ie,{className:"",style:{fontSize:"22px",color:"rgb(22 101 52)"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[z(t.idleTime)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"hrs"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:k("Idle Time")})]}),e.jsxs("div",{className:"col-5 col-md-2 px-2 rounded-3 py-3 mt-1 mx-2 mb-2",style:{minWidth:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"#DBEAFE",borderRadius:"10px",display:"inline-block"},children:e.jsx(ae,{className:"",style:{fontSize:"22px",color:"#2563EB"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[z(t.averageSpeed)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"km/hr"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:k("Avg. Speed")})]})]})})}const Ze=["className","component"];function Qe(t={}){const{themeId:s,defaultTheme:i,defaultClassName:a="MuiBox-root",generateClassName:d}=t,l=Re("div",{shouldForwardProp:o=>o!=="theme"&&o!=="sx"&&o!=="as"})(Fe);return m.forwardRef(function(p,x){const h=We(i),u=Se(p),{className:j,component:C="div"}=u,w=$(u,Ze);return e.jsx(l,_({as:C,ref:x,className:re(j,d?d(a):a),theme:s&&h[s]||h},w))})}const ne=m.createContext(null);function Ve(){const[t,s]=m.useState(null);return m.useEffect(()=>{s(`mui-p-${Math.round(Math.random()*1e5)}`)},[]),t}function V(t){const{children:s,value:i}=t,a=Ve(),d=m.useMemo(()=>({idPrefix:a,value:i}),[a,i]);return e.jsx(ne.Provider,{value:d,children:s})}function le(){return m.useContext(ne)}function de(t,s){const{idPrefix:i}=t;return i===null?null:`${t.idPrefix}-P-${s}`}function ce(t,s){const{idPrefix:i}=t;return i===null?null:`${t.idPrefix}-T-${s}`}const Xe=["children"],Ye=m.forwardRef(function(s,i){const{children:a}=s,d=$(s,Xe),l=le();if(l===null)throw new TypeError("No TabContext provided");const c=m.Children.map(a,o=>m.isValidElement(o)?m.cloneElement(o,{"aria-controls":de(l,o.props.value),id:ce(l,o.props.value)}):null);return e.jsx(Ce,_({},d,{ref:i,value:l.value,children:c}))}),X=Ye;function et(t){return _e("MuiTabPanel",t)}$e("MuiTabPanel",["root"]);const tt=["children","className","value"],st=t=>{const{classes:s}=t;return Ge({root:["root"]},et,s)},it=Be("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>({padding:t.spacing(3)})),at=m.forwardRef(function(s,i){const a=Ue({props:s,name:"MuiTabPanel"}),{children:d,className:l,value:c}=a,o=$(a,tt),p=_({},a),x=st(p),h=le();if(h===null)throw new TypeError("No TabContext provided");const u=de(h,c),j=ce(h,c);return e.jsx(it,_({"aria-labelledby":j,className:re(x.root,l),hidden:c!==h.value,id:u,ref:i,role:"tabpanel",ownerState:p},o,{children:c===h.value&&d}))}),R=at;function me(t){return e.jsx(e.Fragment,{children:t.currentTrip.length>0?e.jsx(Te,{position:"right",className:"d-flex align-items-stretch px-0 px-sm-2",sx:{[`& .${ke.root}`]:{flex:window.innerWidth<500?0:.1}},children:t.currentTrip&&t.currentTrip.map((s,i)=>s.Status==="Delivered"?e.jsxs(H,{children:[e.jsx(J,{color:"#918f97",children:e.jsx("div",{className:"fw-bolder",style:{fontSize:window.innerWidth<500?"18px":"24px",paddingTop:window.innerWidth<500?"7px":"2px",color:"rgb(22 101 52)"},children:"Delivered"})}),e.jsxs(K,{children:[e.jsx(q,{style:{borderWidth:"2px",backgroundColor:"rgb(22 101 52 / 11%)"},children:e.jsx(ye,{className:"fs-5",style:{color:"rgb(22 101 52)"}})}),e.jsx(Z,{style:{borderStyle:"dashed",backgroundColor:"transparent",borderWidth:"2.5px"}})]}),e.jsx(Q,{children:e.jsxs("div",{style:{borderTop:"2px solid #918f9750",paddingTop:"12px",marginTop:"20px",paddingLeft:"5px",borderBottom:"2px solid #918f9750",paddingBottom:"12px"},children:[e.jsxs("div",{className:"fw-bolder",style:{color:"#15283b",fontSize:"20px"},children:[i+1,".  ",s.officeName]}),e.jsx("div",{className:"",style:{color:"#918f97",fontSize:"14px"},children:s.officeAddress}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(M,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",s.DeliveredTime]}),e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(B,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"#4338CA",backgroundColor:"#E0E7FF"}})," Delivered Qty: ",e.jsxs("span",{style:{color:"#4338CA",fontWeight:600,marginLeft:"5px",textWrap:"nowrap"},children:[" ",s.Quantity]})]})]})]})})]},i):e.jsxs(H,{children:[e.jsx(J,{color:"#918f97",children:e.jsx("div",{className:"fw-bolder",style:{color:"#CA8A04",fontSize:window.innerWidth<500?"18px":"22px",paddingTop:window.innerWidth<500?"7px":"2px",width:window.innerWidth<500?"85px":"112px"},children:"Pending"})}),e.jsxs(K,{children:[e.jsx(q,{style:{borderWidth:"9px",backgroundColor:"#FEF3C7"}}),e.jsx(Z,{style:{borderStyle:"dashed",backgroundColor:"transparent",borderWidth:"2.5px"}})]}),e.jsx(Q,{children:e.jsxs("div",{style:{borderTop:"2px solid #918f9750",paddingTop:"12px",marginTop:"20px",paddingLeft:"5px",borderBottom:"2px solid #918f9750",paddingBottom:"12px"},children:[e.jsx("div",{className:"fw-bolder",style:{color:"#15283b",fontSize:"20px"},children:s.officeName}),e.jsx("div",{className:"",style:{color:"#918f97"},children:"Address"}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(M,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)",textWrap:"nowrap"}})," _ _ _ _"]}),e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(B,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"#4338CA",backgroundColor:"#E0E7FF"}})," Delivered Qty: ",e.jsx("span",{style:{color:"#4338CA",fontWeight:600,marginLeft:"5px",textWrap:"nowrap"},children:" 0 L"})]})]})]})})]},i))}):e.jsx("div",{className:"text-center fs-5 py-3",children:"No Trips Found"})})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ot(t,s,i,a){function d(l){return l instanceof i?l:new i(function(c){c(l)})}return new(i||(i=Promise))(function(l,c){function o(h){try{x(a.next(h))}catch(u){c(u)}}function p(h){try{x(a.throw(h))}catch(u){c(u)}}function x(h){h.done?l(h.value):d(h.value).then(o,p)}x((a=a.apply(t,s||[])).next())})}var rt=function t(s,i){if(s===i)return!0;if(s&&i&&typeof s=="object"&&typeof i=="object"){if(s.constructor!==i.constructor)return!1;var a,d,l;if(Array.isArray(s)){if(a=s.length,a!=i.length)return!1;for(d=a;d--!==0;)if(!t(s[d],i[d]))return!1;return!0}if(s.constructor===RegExp)return s.source===i.source&&s.flags===i.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===i.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===i.toString();if(l=Object.keys(s),a=l.length,a!==Object.keys(i).length)return!1;for(d=a;d--!==0;)if(!Object.prototype.hasOwnProperty.call(i,l[d]))return!1;for(d=a;d--!==0;){var c=l[d];if(!t(s[c],i[c]))return!1}return!0}return s!==s&&i!==i};const Y="__googleMapsScriptId";var E;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(E||(E={}));class P{constructor({apiKey:s,authReferrerPolicy:i,channel:a,client:d,id:l=Y,language:c,libraries:o=[],mapIds:p,nonce:x,region:h,retries:u=3,url:j="https://maps.googleapis.com/maps/api/js",version:C}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=s,this.authReferrerPolicy=i,this.channel=a,this.client=d,this.id=l||Y,this.language=c,this.libraries=o,this.mapIds=p,this.nonce=x,this.region=h,this.retries=u,this.url=j,this.version=C,P.instance){if(!rt(this.options,P.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(P.instance.options)}`);return P.instance}P.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?E.FAILURE:this.done?E.SUCCESS:this.loading?E.LOADING:E.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let s=this.url;return s+="?callback=__googleMapsCallback",this.apiKey&&(s+=`&key=${this.apiKey}`),this.channel&&(s+=`&channel=${this.channel}`),this.client&&(s+=`&client=${this.client}`),this.libraries.length>0&&(s+=`&libraries=${this.libraries.join(",")}`),this.language&&(s+=`&language=${this.language}`),this.region&&(s+=`&region=${this.region}`),this.version&&(s+=`&v=${this.version}`),this.mapIds&&(s+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(s+=`&auth_referrer_policy=${this.authReferrerPolicy}`),s}deleteScript(){const s=document.getElementById(this.id);s&&s.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((s,i)=>{this.loadCallback(a=>{a?i(a.error):s(window.google)})})}importLibrary(s){return this.execute(),google.maps.importLibrary(s)}loadCallback(s){this.callbacks.push(s),this.execute()}setScript(){var s,i;if(document.getElementById(this.id)){this.callback();return}const a={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(a).forEach(l=>!a[l]&&delete a[l]),!((i=(s=window==null?void 0:window.google)===null||s===void 0?void 0:s.maps)===null||i===void 0)&&i.importLibrary||(l=>{let c,o,p,x="The Google Maps JavaScript API",h="google",u="importLibrary",j="__ib__",C=document,w=window;w=w[h]||(w[h]={});const T=w.maps||(w.maps={}),N=new Set,v=new URLSearchParams,L=()=>c||(c=new Promise((y,S)=>ot(this,void 0,void 0,function*(){var f;yield o=C.createElement("script"),o.id=this.id,v.set("libraries",[...N]+"");for(p in l)v.set(p.replace(/[A-Z]/g,n=>"_"+n[0].toLowerCase()),l[p]);v.set("callback",h+".maps."+j),o.src=this.url+"?"+v,T[j]=y,o.onerror=()=>c=S(Error(x+" could not load.")),o.nonce=this.nonce||((f=C.querySelector("script[nonce]"))===null||f===void 0?void 0:f.nonce)||"",C.head.append(o)})));T[u]?console.warn(x+" only loads once. Ignoring:",l):T[u]=(y,...S)=>N.add(y)&&L().then(()=>T[u](y,...S))})(a);const d=this.libraries.map(l=>this.importLibrary(l));d.length||d.push(this.importLibrary("core")),Promise.all(d).then(()=>this.callback(),l=>{const c=new ErrorEvent("error",{error:l});this.loadErrorCallback(c)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(s){if(this.errors.push(s),this.errors.length<=this.retries){const i=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${i} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},i)}else this.onerrorEvent=s,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(s=>{s(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}const nt="/assets/truck (left).png",ee="/assets/truck (right).png",lt="/assets/green flag.png",dt="/assets/blue flag.png";function te(t){const[s,i]=m.useState(!1),[a,d]=m.useState(null);m.useState(null);const l=m.useRef();m.useEffect(()=>{const p=new AbortController;if(t.deliveryPlanId){const x=new P({apiKey:"AIzaSyDN32TA762x19KhBZX91X4uNcmdGAhAlrQ",version:"weekly"});(async()=>{var h;try{await x.load(),!p.signal.aborted&&((h=window.google)!=null&&h.maps)&&!s&&i(!0),s&&d(new window.google.maps.Map(l.current,{zoom:15}))}catch(u){console.error("Error loading Google Maps:",u)}})()}return()=>p.abort()},[s]);const c=p=>p*(180/Math.PI),o=async p=>{if(t.deliveryPlanId){const h=new google.maps.DirectionsService,u=new google.maps.DirectionsRenderer({map:a,suppressMarkers:!0,polylineOptions:{strokeColor:"#4074f8",strokeOpacity:.8,strokeWeight:6}}),j=new google.maps.DirectionsRenderer({map:a,suppressMarkers:!0,polylineOptions:{strokeColor:"#ff474c",zIndex:5}}),C=new google.maps.DirectionsRenderer({map:a,suppressMarkers:!0,polylineOptions:{strokeColor:"transparent",zIndex:-1}});u.setMap(a),j.setMap(a),C.setMap(a);let w=[],T=[],N=[],v=[],L=[],y=0,S=0;if(p===1)await fetch(`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/driver_route/${t.deliveryPlanId}`).then(f=>f.json()).then(f=>{t.setMapComponentData(f);let n=f.plannedRoute;y=n[0].startLatitude,S=n[0].startLongitude;for(let g=0;g<n.length;g++){const b=n[g].latitude,D=n[g].longitude;w.push({location:new google.maps.LatLng(b,D)}),T.push({location:new google.maps.LatLng(b,D),officeName:n[g].officeName})}let r=f.driverRoute;for(let g=0;g<r.length;g++){const b=r[g].latitude,D=r[g].longitude;N.push({location:new google.maps.LatLng(b,D),stopover:!0}),r[g].deliveryTrackerStatusId===2&&v.push({location:new google.maps.LatLng(b,D),lastUpdatetime:r[g].locationUpdateTime,officeName:r[g].officeName}),r[g].deliveryTrackerStatusId===3&&v.push({location:new google.maps.LatLng(b,D),lastUpdatetime:r[g].locationUpdateTime})}});else{let f=t.mapComponentData.plannedRoute;y=f[0].startLatitude,S=f[0].startLongitude;for(let r=0;r<f.length;r++){const g=f[r].latitude,b=f[r].longitude;w.push({location:new google.maps.LatLng(g,b)}),T.push({location:new google.maps.LatLng(g,b),officeName:f[r].officeName})}let n=t.mapComponentData.driverRoute;for(let r=0;r<n.length;r++){const g=n[r].latitude,b=n[r].longitude;N.push({location:new google.maps.LatLng(g,b),stopover:!0}),n[r].deliveryTrackerStatusId===2&&v.push({location:new google.maps.LatLng(g,b),lastUpdatetime:n[r].locationUpdateTime,officeName:n[r].officeName}),n[r].deliveryTrackerStatusId===3&&v.push({location:new google.maps.LatLng(g,b),lastUpdatetime:n[r].locationUpdateTime})}}h.route({origin:new google.maps.LatLng(y,S),destination:new google.maps.LatLng(y,S),waypoints:w,optimizeWaypoints:!1,travelMode:google.maps.TravelMode.DRIVING}).then(f=>{u.setDirections(f);for(var n=f.routes[0],r=0;r<n.legs.length;r++)r===0?new google.maps.Marker({position:n.legs[r].start_location,label:{text:"SP",color:"white"},optimized:!1,zIndex:99,map:a}):new google.maps.Marker({position:n.legs[r].start_location,label:{text:r.toString(),color:"white"},optimized:!1,zIndex:99,map:a})}),h.route({origin:new google.maps.LatLng(y,S),destination:N[N.length-1].location,waypoints:N,optimizeWaypoints:!1,travelMode:google.maps.TravelMode.DRIVING}).then(f=>{j.setDirections(f);for(var n=f.routes[0],r=0;r<n.legs.length;r++)if(r===n.legs.length-1)if(n.legs.length>1){var g=Math.atan((n.legs[r].start_location.toJSON().lng-n.legs[r-1].start_location.toJSON().lng)/(n.legs[r].start_location.toJSON().lat-n.legs[r-1].start_location.toJSON().lat));c(g)>90||c(g)<0?(print("right"),new google.maps.Marker({position:n.legs[r].start_location,icon:nt,zIndex:10,map:a})):new google.maps.Marker({position:n.legs[r].start_location,icon:ee,zIndex:10,map:a})}else new google.maps.Marker({position:n.legs[r].start_location,icon:ee,zIndex:10,map:a})});for(var x=0;x<v.length;x++){const f='<div id="content"><div id="siteNotice"></div><h2 id="firstHeading" class="firstHeading fs-3 fw-bold" style="color: green;">Delivered</h2><div id="bodyContent" class="fs-6"><p><b>Pump: </b> '+v[x].officeName+"</p><p><b>Last updated: </b>"+new Date(v[x].lastUpdatetime).toDateString()+"</p></div></div>",n=new google.maps.InfoWindow({content:f,ariaLabel:"Delivered"}),r=new google.maps.Marker({position:v[x].location,icon:{url:lt,size:new google.maps.Size(30,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,18)},zIndex:100,map:a});r.addListener("click",()=>{n.open({anchor:r,map:a,shouldFocus:!1})})}for(var x=0;x<L.length;x++){const n='<div id="content"><div id="siteNotice"></div><h2 id="firstHeading" class="firstHeading" style="color: blue;">Intimate</h4><div id="bodyContent"><p><b>Last updated: </b>'+new Date(v[x].lastUpdatetime).toDateString()+"</p></div></div>",r=new google.maps.InfoWindow({content:n,ariaLabel:"Intimate"});new google.maps.Marker({position:L[x].location,icon:{url:dt,size:new google.maps.Size(30,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,18)},zIndex:100,map:a}),completedMarker.addListener("click",()=>{r.open({anchor:completedMarker,gmapObj:a,shouldFocus:!1})})}}};return m.useEffect(()=>{a&&(t.deliveryPlanId&&t.mapComponentData.length==0?o(1):t.deliveryPlanId&&o(0))},[a]),m.useEffect(()=>{const p=setInterval(o(1),3e5);return()=>{clearInterval(p)}},[]),e.jsx(e.Fragment,{children:t.deliveryPlanId?e.jsx("div",{className:"map",ref:l,style:{height:"100%",borderRadius:"5px"}}):e.jsx("div",{className:"text-center py-3 fs-5",children:"No Ongoing Trip !"})})}Ie([ze,Pe,Ee,Me,Ae,Oe]);function F({title:t,filllevel:s,emptylevel:i,fillTitle:a,emptyTitle:d}){const l=m.useRef();return m.useEffect(()=>{const c=l.current,o=Le(c,null,{renderer:"svg",width:window.innerWidth>1050?"200px":"150px",height:window.innerWidth>1050?"200px":"150px"}),p={title:{text:`${s+i>0?(s/(s+i)*100).toFixed(0):0}%`,left:"center",top:"center"},tooltip:{show:!0,trigger:"item",formatter:"{b}: {c}",confine:!0},legend:{show:!1,bottom:"0"},series:[{name:"Radius Mode",type:"pie",radius:window.innerWidth>1050?[60,80]:[50,65],itemStyle:{borderRadius:5},label:{show:!1},labelLine:{show:!1},data:[{value:s>0?s:"",name:a,itemStyle:{color:new De(0,0,0,1,[{offset:1,color:"#60A5FA"},{offset:0,color:"#60A5FA"}])}},{value:i,name:d,itemStyle:{color:"#DBEAFE"}}]}]};return p&&o.setOption(p),()=>{o.dispose()}},[s,i]),e.jsxs("div",{className:"text-center",style:{width:window.innerWidth>1050?"200px":"150px"},children:[e.jsx("div",{ref:l,style:{minWidth:"100%",height:window.innerWidth>1050?"200px":"150px",width:"0px !important"}}),e.jsx("div",{className:"text-dark fw-semibold fs-6",style:{marginTop:"5px"},children:k(t)})]})}function ct({prevJourney:t}){let s=new Array(t.length).fill(!0);const[i,a]=m.useState(s);m.useEffect(()=>{a(s)},[t]);const d=c=>{if(c){const o=new Date(c),p={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return o.toLocaleDateString("en-US",p)}return""},l=(c,o,p,x)=>{const u=(p+x).toFixed(1)+" hrs";return{distance:`${c.toFixed(0)} km`,tankLevel:`${o} L`,duration:u}};return e.jsx("div",{className:"pb-2",children:t.length>0?t.map((c,o)=>{var N,v,L,y,S,f,n,r;const p=(N=t[o])==null?void 0:N.startTime,x=(v=t[o])==null?void 0:v.planTitle,h=((L=t[o])==null?void 0:L.journey)||[],u=((y=t[o])==null?void 0:y.distanceCovered)||0,j=((S=t[o])==null?void 0:S.containerSize)||0,C=((f=t[o])==null?void 0:f.drivingTime)||0,w=((n=t[o])==null?void 0:n.idleTime)||0,T=l(u,j,C,w);return e.jsxs("div",{className:"accordion mt-2 mb-3 mx-2 rounded-3",style:{marginBottom:"15px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",borderColor:"transparent"},children:[e.jsxs("div",{className:"accordion-item rounded-3 d-flex align-items-start",style:{border:0},children:[e.jsx("h2",{className:"accordion-header",id:"headingOne"}),e.jsx("button",{onClick:()=>a(g=>[...g.slice(0,o),!g[o],...g.slice(o+1)]),className:`accordion-button d-flex align-items-baseline ${i[o]?"collapsed":""} fs-4`,type:"button",style:{color:i[o]?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:e.jsxs("div",{className:"d-flex flex-column",style:{width:"inherit"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start flex-column mb-2",children:[e.jsxs("div",{className:"fs-5 mb-1",style:{display:"flex",alignItems:"center",fontWeight:"bold",lineBreak:"anywhere",letterSpacing:".8px",lineHeight:1.5},children:[e.jsx("div",{className:"fs-6",style:{minWidth:"40px",minHeight:"40px",borderRadius:"50%",border:"2px solid rgb(37, 99, 235)",color:"rgb(37, 99, 235)",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",marginRight:"8px",lineHeight:".8px"},children:o+1}),x]}),e.jsxs("div",{className:"",style:{marginLeft:"40px",fontSize:"14px",color:"#918f97",lineHeight:.7,fontWeight:100},children:[e.jsx(M,{className:" p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",d(p)]})]}),e.jsx("div",{style:{marginBottom:"12px",marginLeft:"40px",fontSize:"14px",letterSpacing:".5px",color:"#15283b",lineHeight:1.75,fontWeight:200},children:h.map((g,b)=>e.jsxs("span",{children:[b>0?" -> ":"",g]},b))}),e.jsxs("div",{style:{marginLeft:"40px",color:"#15283b"},className:"d-flex justify-content-between",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",lineHeight:.8,alignItems:"center"},children:[e.jsxs("span",{className:"d-flex align-items-center fw-bold",style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(oe,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"#DC2626",backgroundColor:"#FECACA"}})," ",window.innerWidth<500?"":k("Distance")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"#DC2626",fontWeight:"bold",lineHeight:2},children:T.distance})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",lineHeight:.8,alignItems:"center"},children:[e.jsxs("span",{className:"d-flex align-items-center fw-bold",style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(je,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"#2563EB",backgroundColor:"#DBEAFE"}})," ",window.innerWidth<500?"":k("Tank Level")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"#2563EB",fontWeight:"bold",lineHeight:2},children:T.tankLevel})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",lineHeight:.8,alignItems:"center"},children:[e.jsxs("span",{className:"d-flex align-items-center fw-bold",style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(M,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",window.innerWidth<500?"":k("Duration")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"green",fontWeight:"bold",lineHeight:2},children:T.duration})]})]})]},o)})]}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${i[o]?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-0 py-2",children:e.jsx("div",{className:"",children:e.jsx(me,{currentTrip:(r=t[o])==null?void 0:r.tripMap})})})})]},o)}):e.jsx("div",{className:"text-center fs-5 py-3",children:"No Previous Trip Found"})})}const mt=He(),pt=Qe({themeId:Je,defaultTheme:mt,defaultClassName:"MuiBox-root",generateClassName:Ke.generate}),W=pt;function se({distanceCovered:t,drivingTime:s,idleTime:i,averageSpeed:a}){return e.jsxs("div",{className:"row gap-2 mx-0 mb-1 mt-2 d-flex align-items-stretch justify-content-center",children:[e.jsxs("div",{className:"px-2 rounded-3 py-2 mt-1 mx-1 ",style:{width:"44%",fontSize:"14px",color:"#15283b",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(M,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}}),k("Driving Time")]}),e.jsxs("div",{className:"fs-2 fw-bold py-1 px-1",children:[z(s)," ",e.jsx("span",{className:"fs-5",children:"hrs"})]})]}),e.jsxs("div",{className:"px-2 rounded-3 py-2 mt-1 mx-1 ",style:{width:"44%",fontSize:"14px",color:"#15283b",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(ue,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"#DC2626",backgroundColor:"#FECACA"}}),k("Distance Covered")]}),e.jsxs("div",{className:"fs-2 fw-bold py-1 px-1",children:[z(t)," ",e.jsx("span",{className:"fs-5",children:"km"})]})]}),e.jsxs("div",{className:"px-2 rounded-3 py-2 mt-1 mx-1 ",style:{width:"44%",fontSize:"14px",color:"#15283b",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(ie,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}}),k("Idle Time")]}),e.jsxs("div",{className:"fs-2 fw-bold py-1 px-1",children:[z(i)," ",e.jsx("span",{className:"fs-5",children:"hrs"})]})]}),e.jsxs("div",{className:"px-2 rounded-3 py-2 mt-1 mx-1 ",style:{width:"44%",fontSize:"14px",color:"#15283b",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(ae,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"#2563EB",backgroundColor:"#DBEAFE"}}),k("Average Speed")]}),e.jsxs("div",{className:"fs-2 fw-bold py-1 px-1",children:[z(a)," ",e.jsx("span",{className:"fs-5",children:"km/hr"})]})]})]})}function Ct(){const[t,s]=m.useState({distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0,profile:{driverName:"",driverLicenceNo:"",driverContactNo:""},graph1:{totalTankFuel:0,fuelUnloaded:0},graph2:{totalJob:0,jobCompleted:0},prevJourney:[],myTrip:[],alltime:{distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0},currentDeliveredPlanId:0}),[i,a]=m.useState([]),[d,l]=m.useState(!0),[c,o]=m.useState(!1),[p,x]=m.useState(!0),[h,u]=m.useState("1"),[j,C]=m.useState(0),[w,T]=m.useState(!1);m.useState(""),m.useState("");const[N,v]=m.useState([]),L=new URLSearchParams(window.location.search),{t:y,i18n:S}=pe(),{driverId:f}=he(),{state:n}=ge(),r=xe(),g=async()=>{try{if(S.changeLanguage(L.get("lang")||"en"),f){let I=await fe.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/dashboard/driver/metrics/${f}`);const{data:A}=I;I.data&&l(!1),s(A)}}catch(I){console.log(I),l(!1)}};m.useEffect(()=>{g();const I=setInterval(g,3e5);return()=>clearInterval(I)},[]);const[b,D]=m.useState(window.innerWidth);return m.useEffect(()=>{const I=()=>{D(window.innerWidth)};return window.addEventListener("resize",I),()=>{window.removeEventListener("resize",I)}},[]),w?e.jsx(Ne,{data:i,deliveryPlanId:j}):e.jsxs("div",{className:"d-flex align-items-start justify-content-between",children:[e.jsxs("div",{className:" mx-0 align-items-start ",style:{width:b>950?"60%":"100%",overflowY:"scroll",height:"99vh"},children:[e.jsxs("div",{className:"fs-4 mt-3 fw-bolder px-xl-5 px-lg-4 px-md-3 px-2",style:{color:"#15283b"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between ",children:[e.jsxs("div",{className:"d-flex align-items-center d-flex flex-wrap",children:[n.isback?e.jsx(be,{className:"fs-1 me-2",style:{color:"rgb(37, 99, 235)",cursor:"pointer"},onClick:()=>r(-1)}):"",t.profile.driverName,n.status?e.jsx("div",{className:"px-2 py-1 rounded-2 fs-6 mx-1 mt-1 mx-sm-2 ",style:{backgroundColor:"rgb(37, 99, 235,0.1)",color:"rgb(37, 99, 235)",letterSpacing:"1px"},children:n.status}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"spinner-border text-primary ",role:"status",style:{display:d?"block":"none"}})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[!n.isback&&n.statusId<=3?e.jsxs("button",{className:"btn fs-6 rounded-3 mx-2 d-flex align-items-center",onClick:()=>r(`/driverstatistic?token=${n.token}&tableview=true`),style:{backgroundColor:"rgb(37, 99, 235)",color:"white",letterSpacing:"1px"},children:[e.jsx(ve,{className:"me-1 fs-5"}),b>950?"Change Driver":""]}):"",e.jsx("a",{href:`tel:${t.profile.driverContactNo}`,style:{cursor:"pointer"},children:e.jsx(we,{className:"fs-3",style:{color:"rgb(37, 99, 235)",cursor:"pointer"}})})]})]}),e.jsx("hr",{style:{borderColor:"rgb(37, 99, 235)",borderWidth:"2px",marginBottom:"5px",marginTop:"10px"}})]}),e.jsx(qe,{distanceCovered:t.alltime.distanceCovered,drivingTime:t.alltime.drivingTime,idleTime:t.alltime.idleTime,averageSpeed:t.alltime.averageSpeed}),e.jsx("div",{style:{display:b<=950?"block":"none"},children:e.jsx(W,{sx:{width:"100%"},children:e.jsxs(V,{value:h,children:[e.jsx(W,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(X,{centered:!0,onChange:(I,A)=>u(A),"aria-label":"lab API tabs example",children:[e.jsx(O,{disabled:!!d,className:"fw-bold fs-5",label:"Stats",value:"1"}),e.jsx(O,{disabled:!!d,className:"fw-bold fs-5",label:"Map",value:"2"})]})}),e.jsxs(R,{value:"1",className:"px-0",children:[e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(U,{className:"fs-2",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),y("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(F,{title:"Tanker Fuel Level",filllevel:t.graph1.totalTankFuel-t.graph1.fuelUnloaded,emptylevel:t.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(F,{title:"Jobs Completed",emptylevel:t.graph2.totalJob-t.graph2.jobCompleted,filllevel:t.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]}),e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1 mt-3",style:{color:"#15283b"},children:[e.jsx(G,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),y("Current Metrics")]}),e.jsx(se,{distanceCovered:t.distanceCovered,drivingTime:t.drivingTime,idleTime:t.idleTime,averageSpeed:t.averageSpeed})]}),e.jsx(R,{value:"2",className:"p-0",children:e.jsx("div",{className:"",style:{height:b>950?"88vh":"50vh"},children:e.jsx(te,{deliveryPlanId:t.currentDeliveredPlanId,mapComponentData:N,setMapComponentData:v})})})]})})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>o(!c),className:`accordion-button ${c?"collapsed":""} fs-4`,type:"button",style:{color:c?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:y("Ongoing Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${c?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(me,{currentTrip:t.myTrip})})})})]})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3 mb-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>x(!p),className:`accordion-button ${p?"collapsed":""} fs-4`,type:"button",style:{color:p?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:y("Previous Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${p?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(ct,{prevJourney:t.prevJourney})})})})]})})]}),e.jsx("div",{style:{width:"40%",display:b>950?"block":"none"},children:e.jsx("div",{className:"p-2 pt-2 mx-1 my-1  rounded-3",style:{boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white",position:"relative",marginTop:"0px"},children:e.jsx(W,{sx:{width:"100%"},children:e.jsxs(V,{value:h,children:[e.jsx(W,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(X,{centered:!0,onChange:(I,A)=>u(A),"aria-label":"lab API tabs example",children:[e.jsx(O,{disabled:!!d,className:"fw-bold fs-5",label:"Stats",value:"1"}),e.jsx(O,{disabled:!!d,className:"fw-bold fs-5",label:"Map",value:"2"})]})}),e.jsxs(R,{value:"1",className:"px-0",children:[e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(U,{className:"fs-2",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),y("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(F,{title:"Tanker Fuel Level",filllevel:t.graph1.totalTankFuel-t.graph1.fuelUnloaded,emptylevel:t.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(F,{title:"Jobs Completed",emptylevel:t.graph2.totalJob-t.graph2.jobCompleted,filllevel:t.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]}),e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1 mt-3",style:{color:"#15283b"},children:[e.jsx(G,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),y("Current Metrics")]}),e.jsx(se,{distanceCovered:t.distanceCovered,drivingTime:t.drivingTime,idleTime:t.idleTime,averageSpeed:t.averageSpeed})]}),e.jsx(R,{value:"2",className:"p-0",children:e.jsx("div",{className:"",style:{height:"88vh"},children:e.jsx(te,{deliveryPlanId:t.currentDeliveredPlanId,mapComponentData:N,setMapComponentData:v})})})]})})})})]})}export{Ct as default};
