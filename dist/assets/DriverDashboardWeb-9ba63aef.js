import{r as l,u as B,g as F,f as A,e as E,j as e}from"./vendor-d1a31163.js";import{D as U,T,a as C,b as m,c as p,M as w,C as $,P as R}from"./MetricsCard-551bc132.js";import{M as W,B as x}from"./Box-f65f2bf3.js";import S from"./MapComponent-9997e3c1.js";import{a as z,b as Y,I as k,B as L}from"./index.esm-7adca8f5.js";import{a as q}from"./axios-d9b95618.js";import{T as v}from"./Tab-e259bd25.js";import"./installSVGRenderer-7788c1a1.js";import"./extendSxProp-4fc022a8.js";import"./react-is.production.min-ec3da07b.js";import"./useTheme-55d19bd2.js";import"./createSvgIcon-a8b447bb.js";function te(){const[a,I]=l.useState({distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0,profile:{driverName:"",driverLicenceNo:"",driverContactNo:""},graph1:{totalTankFuel:0,fuelUnloaded:0},graph2:{totalJob:0,jobCompleted:0},prevJourney:[],myTrip:[],alltime:{distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0},currentDeliveredPlanId:0}),[i,g]=l.useState(!0),[d,O]=l.useState(!1),[c,P]=l.useState(!0),[b,h]=l.useState("1"),[u,f]=l.useState([]),D=new URLSearchParams(window.location.search),{t,i18n:J}=B(),{driverId:j}=F(),{state:r}=A(),y=E(),N=async()=>{try{if(J.changeLanguage(D.get("lang")||"en"),j){let s=await q.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/dashboard/driver/metrics/${j}`);const{data:n}=s;s.data&&g(!1),I(n)}}catch(s){console.log(s),g(!1)}};l.useEffect(()=>{N();const s=setInterval(N,3e5);return()=>clearInterval(s)},[]);const[o,M]=l.useState(window.innerWidth);return l.useEffect(()=>{const s=()=>{M(window.innerWidth)};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]),e.jsxs("div",{className:"d-flex align-items-start justify-content-between",children:[e.jsxs("div",{className:" mx-0 align-items-start ",style:{width:o>950?"60%":"100%",overflowY:"scroll",height:"99vh"},children:[e.jsxs("div",{className:"fs-4 mt-3 fw-bolder px-xl-5 px-lg-4 px-md-3 px-2",style:{color:"#15283b"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between ",children:[e.jsxs("div",{className:"d-flex align-items-center d-flex flex-wrap",children:[r.isback?e.jsx(z,{className:"fs-1 me-2",style:{color:"rgb(37, 99, 235)",cursor:"pointer"},onClick:()=>y(-1)}):"",a.profile.driverName,r.status?e.jsx("div",{className:"px-2 py-1 rounded-2 fs-6 mx-1 mt-1 mx-sm-2 ",style:{backgroundColor:"rgb(37, 99, 235,0.1)",color:"rgb(37, 99, 235)",letterSpacing:"1px"},children:r.status}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"spinner-border text-primary ",role:"status",style:{display:i?"block":"none"}})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[!r.isback&&r.statusId<=3?e.jsxs("button",{className:"btn fs-6 rounded-3 mx-2 d-flex align-items-center",onClick:()=>y(`/driverstatistic?token=${r.token}&tableview=true`),style:{backgroundColor:"rgb(37, 99, 235)",color:"white",letterSpacing:"1px"},children:[e.jsx(Y,{className:"me-1 fs-5"}),o>950?"Change Driver":""]}):"",e.jsx("a",{href:`tel:${a.profile.driverContactNo}`,style:{cursor:"pointer"},children:e.jsx(W,{className:"fs-3",style:{color:"rgb(37, 99, 235)",cursor:"pointer"}})})]})]}),e.jsx("hr",{style:{borderColor:"rgb(37, 99, 235)",borderWidth:"2px",marginBottom:"5px",marginTop:"10px"}})]}),e.jsx(U,{distanceCovered:a.alltime.distanceCovered,drivingTime:a.alltime.drivingTime,idleTime:a.alltime.idleTime,averageSpeed:a.alltime.averageSpeed}),e.jsx("div",{style:{display:o<=950?"block":"none"},children:e.jsx(x,{sx:{width:"100%"},children:e.jsxs(T,{value:b,children:[e.jsx(x,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(C,{centered:!0,onChange:(s,n)=>h(n),"aria-label":"lab API tabs example",children:[e.jsx(v,{disabled:!!i,className:"fw-bold fs-5",label:"Stats",value:"1"}),e.jsx(v,{disabled:!!i,className:"fw-bold fs-5",label:"Map",value:"2"})]})}),e.jsxs(m,{value:"1",className:"px-0",children:[e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(k,{className:"fs-2",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),t("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(p,{title:"Tanker Fuel Level",filllevel:a.graph1.totalTankFuel-a.graph1.fuelUnloaded,emptylevel:a.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(p,{title:"Jobs Completed",emptylevel:a.graph2.totalJob-a.graph2.jobCompleted,filllevel:a.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]}),e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1 mt-3",style:{color:"#15283b"},children:[e.jsx(L,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),t("Current Metrics")]}),e.jsx(w,{distanceCovered:a.distanceCovered,drivingTime:a.drivingTime,idleTime:a.idleTime,averageSpeed:a.averageSpeed})]}),e.jsx(m,{value:"2",className:"p-0",children:e.jsx("div",{className:"",style:{height:o>950?"88vh":"50vh"},children:e.jsx(S,{deliveryPlanId:a.currentDeliveredPlanId,mapComponentData:u,setMapComponentData:f})})})]})})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>O(!d),className:`accordion-button ${d?"collapsed":""} fs-4`,type:"button",style:{color:d?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:t("Ongoing Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${d?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx($,{currentTrip:a.myTrip})})})})]})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3 mb-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>P(!c),className:`accordion-button ${c?"collapsed":""} fs-4`,type:"button",style:{color:c?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:t("Previous Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${c?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(R,{prevJourney:a.prevJourney})})})})]})})]}),e.jsx("div",{style:{width:"40%",display:o>950?"block":"none"},children:e.jsx("div",{className:"p-2 pt-2 mx-1 my-1  rounded-3",style:{boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white",position:"relative",marginTop:"0px"},children:e.jsx(x,{sx:{width:"100%"},children:e.jsxs(T,{value:b,children:[e.jsx(x,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(C,{centered:!0,onChange:(s,n)=>h(n),"aria-label":"lab API tabs example",children:[e.jsx(v,{disabled:!!i,className:"fw-bold fs-5",label:"Stats",value:"1"}),e.jsx(v,{disabled:!!i,className:"fw-bold fs-5",label:"Map",value:"2"})]})}),e.jsxs(m,{value:"1",className:"px-0",children:[e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(k,{className:"fs-2",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),t("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(p,{title:"Tanker Fuel Level",filllevel:a.graph1.totalTankFuel-a.graph1.fuelUnloaded,emptylevel:a.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(p,{title:"Jobs Completed",emptylevel:a.graph2.totalJob-a.graph2.jobCompleted,filllevel:a.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]}),e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1 mt-3",style:{color:"#15283b"},children:[e.jsx(L,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),t("Current Metrics")]}),e.jsx(w,{distanceCovered:a.distanceCovered,drivingTime:a.drivingTime,idleTime:a.idleTime,averageSpeed:a.averageSpeed})]}),e.jsx(m,{value:"2",className:"p-0",children:e.jsx("div",{className:"",style:{height:"88vh"},children:e.jsx(S,{deliveryPlanId:a.currentDeliveredPlanId,mapComponentData:u,setMapComponentData:f})})})]})})})})]})}export{te as default};
