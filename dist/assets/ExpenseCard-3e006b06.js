import{u as E,r,j as e,y as R,F as k,x as A}from"./vendor-fe8b2466.js";import{c as D}from"./index-948b3792.js";import{R as C}from"./index-e2efe08c.js";function G({countExpense:I,totalExpense:v,todayExpense:S,alldata:F,selectedRange:M,officeId:q,adminStatus:L,expenseCardData:h}){const{t:l}=E(),[N,j]=r.useState({current7Days:[],previous7Days:[]}),[x,y]=r.useState(!0),[f,b]=r.useState(0);r.useEffect(()=>{const a=new Date;new Date(a).setDate(a.getDate()-13);async function i(){const d=h;if(Array.isArray(d)){const p=d.map(t=>({requestedDate:new Date(t.requestedDate),expense:t.totalExpense})),c=new Date,o=new Date(c);o.setDate(c.getDate()-7);const w=p.filter(t=>{const s=new Date(t.requestedDate);return s>=o&&s<=c}),g=new Date(o);g.setDate(o.getDate()-7);const u=p.filter(t=>{const s=new Date(t.requestedDate);return s>=g&&s<o}),T=w.reduce((t,s)=>t+s.expense,0),m=u.reduce((t,s)=>t+s.expense,0),z=Math.min((T-m)/m*100,100);b(z),j({current7Days:w,previous7Days:u})}else console.log("Invalid data format:",d)}i()},[h]);const W={grid:{left:12,right:12,top:10,bottom:20},legend:{show:!1,textStyle:{color:"white",fontSize:window.innerWidth<=768?8:12},top:20,left:"center",itemWidth:(window.innerWidth<=768,5),itemHeight:window.innerWidth<=768?8:10},xAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"white",left:0,right:0},boundaryGap:!1,data:["Su","Mo","Tu","We","Th","Fr","Sa"]},yAxis:{type:"value",show:!1},tooltip:{trigger:"axis",backgroundColor:"rgba(0, 0, 0, 0)",textStyle:{fontSize:window.innerWidth<=768?10:14,color:"white"},formatter:function(a){let n="<div>";return n+=`<div>${a[0].name}</div>`,a.forEach(i=>{n+='<div style="display: flex; align-items: center;">',n+=`<span style="color: ${i.color}; margin-right: 5px;">●</span>`,n+=`<span style="font-weight: bold;">${i.seriesName}: ₹${i.value}</span>`,n+="</div>"}),n+="</div>",n}},series:[{data:[100,15,352,145,500,512,400],name:"This Week",type:"line",yAxisIndex:0,symbol:"none",itemStyle:{color:"pink"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(255, 105, 180)"},{offset:1,color:"rgba(0, 0, 0, 0)"}]}},smooth:!0,lineStyle:{width:3,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:5,shadowOffsetY:5}}]};return e.jsxs("div",{className:D.card4,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[e.jsxs("div",{className:D.cardHead,children:[e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:l("Expense")}),e.jsx("span",{children:e.jsx(R,{size:50})})]}),e.jsx("div",{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",width:"100%",height:"30px"},children:[e.jsxs("div",{className:"mb-0",style:{display:"flex",alignItems:"center"},children:[e.jsxs("span",{style:{marginRight:"5px",fontSize:window.innerWidth>600?"1.1rem":"0.8rem"},children:[" ",x?"7 "+l("days"):l("Today")]}),e.jsx("div",{children:e.jsxs("div",{style:{display:"flex"},children:[e.jsx("span",{style:{marginRight:"2px",marginTop:"6px",fontWeight:"bold",fontSize:window.innerWidth>600?".9rem":"0.7rem"},children:"₹"}),e.jsx("span",{style:{fontWeight:"bold",fontSize:window.innerWidth>600?"2.1rem":"1.7rem",marginRight:"5px"},children:x?v:S})]})})]}),e.jsx("div",{style:{display:window.innerWidth>600?"flex":"none",alignItems:"flex-start"},children:e.jsxs("div",{style:{backgroundColor:"rgba(255, 105, 180)",padding:"2px 4px",borderRadius:"20px",display:"inline-flex",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:window.innerWidth>600?"0.9rem":"0.7rem",color:f>0?"yellow":"rgba(255,0,0,0.6)"}}),e.jsx("i",{style:{marginLeft:"0px"},children:f>0?e.jsx(k,{style:{fontSize:window.innerWidth>600?"0.9rem":"0.7rem",color:"yellow"}}):e.jsx(A,{style:{fontSize:window.innerWidth>600?"0.9rem":"0.7rem",color:"rgba(255,0,0,0.6)"}})})]})})]}),e.jsx("div",{style:{display:"flex"},children:e.jsx(C,{option:W,style:{height:"80%",width:"100%"}})})]})})]})}export{G as default};
