import{j as e,d as c,r as m,u as $}from"./vendor-36ea1262.js";import{G as S,F as w,a as C}from"./axios-67c74b23.js";import{F as j,G as B,I,a as k,b as z}from"./index.esm-bf418bb2.js";import{T as R,t as M,a as L,b as D,c as F,d as O,e as W,f as A}from"./TimelineSeparator-28189d14.js";import{u as P,i as U,L as J,a as G,b as H,c as _,d as Q,e as V,f as Y}from"./installSVGRenderer-7788c1a1.js";import"./isMuiElement-03f9640f.js";function q(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}}]})(t)}function K(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"}}]})(t)}function X(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z"}},{tag:"circle",attr:{cx:"12",cy:"9",r:"2.5"}}]})(t)}function Z(t){return e.jsxs("div",{className:"d-flex align-items-center justify-content-center my-2 flex-wrap",children:[e.jsxs("div",{className:"px-2 rounded-3 py-3 mt-1 mx-2 ",style:{width:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"rgb(22 101 52 / 11%)",borderRadius:"10px",display:"inline-block"},children:e.jsx(w,{className:"",style:{fontSize:"22px",color:"rgb(22 101 52)"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[j(t.drivingTime)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"hrs"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:c("Driving Time")})]}),e.jsxs("div",{className:"px-2 rounded-3 py-3 mt-1 mx-2 ",style:{width:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"#FECACA",borderRadius:"10px",display:"inline-block"},children:e.jsx(X,{className:"",style:{fontSize:"22px",color:"#DC2626"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[j(t.distanceCovered)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"km"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:c("Distance")})]}),e.jsxs("div",{className:"px-2 rounded-3 py-3 mt-1 mx-2 ",style:{width:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"rgb(22 101 52 / 11%)",borderRadius:"10px",display:"inline-block"},children:e.jsx(B,{className:"",style:{fontSize:"22px",color:"rgb(22 101 52)"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[j(t.idleTime)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"hrs"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:c("Idle Time")})]}),e.jsxs("div",{className:"px-2 rounded-3 py-3 mt-1 mx-2 ",style:{width:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"#DBEAFE",borderRadius:"10px",display:"inline-block"},children:e.jsx(I,{className:"",style:{fontSize:"22px",color:"#2563EB"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[j(t.averageSpeed)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"km/hr"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:c("Avg. Speed")})]})]})}function ee(t){return e.jsx(R,{position:"right",className:"d-flex align-items-stretch",sx:{[`& .${M.root}`]:{flex:.1}},children:t.currentTrip&&t.currentTrip.map((l,i)=>l.Status==="Delivered"?e.jsxs(L,{children:[e.jsx(D,{color:"#918f97",children:e.jsx("div",{className:"fw-bolder",style:{fontSize:"24px",paddingTop:"2px",color:"rgb(22 101 52)"},children:"Delivered"})}),e.jsxs(F,{children:[e.jsx(O,{style:{borderWidth:"2px",backgroundColor:"rgb(22 101 52 / 11%)"},children:e.jsx(q,{className:"fs-5",style:{color:"rgb(22 101 52)"}})}),e.jsx(W,{style:{borderStyle:"dashed",backgroundColor:"transparent",borderWidth:"2.5px"}})]}),e.jsx(A,{children:e.jsxs("div",{style:{borderTop:"2px solid #918f9750",paddingTop:"12px",marginTop:"20px",paddingLeft:"5px",borderBottom:"2px solid #918f9750",paddingBottom:"12px"},children:[e.jsx("div",{className:"fw-bolder",style:{color:"#15283b",fontSize:"20px"},children:l.officeName}),e.jsx("div",{className:"",style:{color:"#918f97"},children:"Address"}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(w,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",l.DeliveredTime]}),e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(k,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"#4338CA",backgroundColor:"#E0E7FF"}})," Delivered Qty: ",e.jsxs("span",{style:{color:"#4338CA",fontWeight:600,marginLeft:"5px",textWrap:"nowrap"},children:[" ",l.Quantity]})]})]})]})})]},i):e.jsxs(L,{children:[e.jsx(D,{color:"#918f97",children:e.jsx("div",{className:"fw-bolder",style:{color:"#CA8A04",fontSize:"22px",width:"112px"},children:"Pending"})}),e.jsxs(F,{children:[e.jsx(O,{style:{borderWidth:"9px",backgroundColor:"#FEF3C7"}}),e.jsx(W,{style:{borderStyle:"dashed",backgroundColor:"transparent",borderWidth:"2.5px"}})]}),e.jsx(A,{children:e.jsxs("div",{style:{borderTop:"2px solid #918f9750",paddingTop:"12px",marginTop:"20px",paddingLeft:"5px",borderBottom:"2px solid #918f9750",paddingBottom:"12px"},children:[e.jsx("div",{className:"fw-bolder",style:{color:"#15283b",fontSize:"20px"},children:l.officeName}),e.jsx("div",{className:"",style:{color:"#918f97"},children:"Address"}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(w,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)",textWrap:"nowrap"}})," _ _ _ _"]}),e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(k,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"#4338CA",backgroundColor:"#E0E7FF"}})," Delivered Qty: ",e.jsx("span",{style:{color:"#4338CA",fontWeight:600,marginLeft:"5px",textWrap:"nowrap"},children:" 0 L"})]})]})]})})]},i))})}P([G,H,_,Q,V,Y]);function y({title:t,filllevel:l,emptylevel:i,fillTitle:d,emptyTitle:s}){const r=m.useRef();return m.useEffect(()=>{const a=r.current,x=U(a,null,{renderer:"svg"}),o={title:{text:`${l+i>0?(l/(l+i)*100).toFixed(0):0}%`,left:"center",top:"center"},tooltip:{show:!0,trigger:"item",formatter:"{b}: {c}",confine:!0},legend:{show:!1,bottom:"0"},series:[{name:"Radius Mode",type:"pie",radius:window.innerWidth>1050?[60,80]:[50,65],itemStyle:{borderRadius:5},label:{show:!1},labelLine:{show:!1},data:[{value:l>0?l:"",name:d,itemStyle:{color:new J(0,0,0,1,[{offset:1,color:"#60A5FA"},{offset:0,color:"#60A5FA"}])}},{value:i,name:s,itemStyle:{color:"#DBEAFE"}}]}]};return o&&x.setOption(o),()=>{x.dispose()}},[l,i]),e.jsxs("div",{className:"text-center",style:{width:window.innerWidth>1050?"200px":"150px"},children:[e.jsx("div",{ref:r,style:{minWidth:"100%",height:window.innerWidth>1050?"200px":"150px",width:"0px !important"}}),e.jsx("div",{className:"text-dark fw-semibold fs-6",style:{marginTop:"5px"},children:c(t)})]})}function te({prevJourney:t}){const l=d=>{if(d){const s=new Date(d),r={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return s.toLocaleDateString("en-US",r)}return""},i=(d,s,r,a)=>{const o=(r+a).toFixed(1)+" hrs";return{distance:`${d.toFixed(0)} km`,tankLevel:`${s} L`,duration:o}};return e.jsx("div",{className:"pb-2",children:t.length>0?t.map((d,s)=>{var n,b,u,p,f,v;const r=(n=t[s])==null?void 0:n.startTime,a=((b=t[s])==null?void 0:b.journey)||[],x=((u=t[s])==null?void 0:u.distanceCovered)||0,o=((p=t[s])==null?void 0:p.containerSize)||0,h=((f=t[s])==null?void 0:f.drivingTime)||0,N=((v=t[s])==null?void 0:v.idleTime)||0,g=i(x,o,h,N);return e.jsxs("div",{className:"d-flex flex-column ps-3 pe-3 rounded-3 py-3 mt-1 mx-3",style:{marginBottom:"15px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"fs-5 mb-1",style:{color:"black",display:"flex",alignItems:"center",fontWeight:"bold",letterSpacing:".8px"},children:[e.jsx("div",{className:"fs-6",style:{width:"30px",height:"30px",borderRadius:"50%",border:"2px solid rgb(37, 99, 235)",color:"rgb(37, 99, 235)",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",marginRight:"8px"},children:s+1}),c("Travel Routes")]}),e.jsx("div",{className:"fs-6",children:l(r)})]}),e.jsx("div",{style:{marginBottom:"10px",marginLeft:"40px",fontSize:"14px",letterSpacing:".5px"},children:a.map((E,T)=>e.jsxs("span",{children:[T>0?" -> ":"",E]},T))}),e.jsxs("div",{style:{marginLeft:"40px"},className:"d-flex justify-content-between",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{letterSpacing:".25px"},children:c("Distance")}),e.jsx("span",{style:{fontSize:"16px",color:"red",fontWeight:"bold"},children:g.distance})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{letterSpacing:".25px"},children:c("Tank Level")}),e.jsx("span",{style:{fontSize:"16px",color:"blue",fontWeight:"bold"},children:g.tankLevel})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{style:{letterSpacing:".25px"},children:c("Duration")}),e.jsx("span",{style:{fontSize:"16px",color:"green",fontWeight:"bold"},children:g.duration})]})]})]},s)}):e.jsx("div",{className:"text-center my-5",children:"No Previous Journey Found"})})}function ne(){const[t,l]=m.useState({distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0,profile:{driverName:"",driverLicenceNo:"",driverContactNo:""},graph1:{totalTankFuel:0,fuelUnloaded:0},graph2:{totalJob:0,jobCompleted:0},prevJourney:[],myTrip:[],alltime:{distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0}}),[i,d]=m.useState(!1),[s,r]=m.useState(!1),[a,x]=m.useState(!0),o=new URLSearchParams(window.location.search),{t:h,i18n:N}=$(),g=async()=>{try{N.changeLanguage(o.get("lang")||"en");let n="";const b=o.get("jwtToken");b&&(n=JSON.parse(atob(b.split(".")[1])));const u=o.get("driverId");if(u){let p=await C.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in//api/v1/dashboard/driver/metrics/${u}`);const{data:f}=p;l(f)}else if(n){const p=n.sub;if(p){let f=await C.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in//api/v1/dashboard/driver/metrics/${p}`);const{data:v}=f;l(v)}}}catch(n){console.log(n),d(!1)}};return m.useEffect(()=>{g();const n=setInterval(g,3e5);return()=>clearInterval(n)},[]),e.jsxs("div",{className:"d-flex align-items-start justify-content-between",children:[e.jsxs("div",{className:" mx-0 align-items-start ",style:{width:window.innerWidth>950?"60%":"100%",overflowY:"scroll",height:"99vh"},children:[e.jsxs("div",{className:"fs-4 mt-3 fw-bolder px-xl-5 px-lg-4 px-md-3 px-2",style:{color:"#15283b"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[t.profile.driverName,e.jsx("div",{className:"px-2 py-1 rounded-2 fs-6 mx-2",style:{backgroundColor:"rgb(37, 99, 235,0.1)",color:"rgb(37, 99, 235)",letterSpacing:"1px"},children:"Driver"})]}),e.jsx("a",{href:`tel:${t.profile.driverContactNo}`,style:{cursor:"pointer"},children:e.jsx(K,{className:"fs-3",style:{color:"rgb(37, 99, 235)",cursor:"pointer"}})})]}),e.jsx("hr",{style:{borderColor:"rgb(37, 99, 235)",borderWidth:"2px",marginBottom:"5px",marginTop:"10px"}})]}),e.jsx(Z,{distanceCovered:t.alltime.distanceCovered,drivingTime:t.alltime.drivingTime,idleTime:t.alltime.idleTime,averageSpeed:t.alltime.averageSpeed}),e.jsx("div",{style:{display:window.innerWidth<=950?"block":"none"},children:e.jsxs("div",{className:"p-2 py-3  rounded-3",style:{boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white",position:"relative",marginTop:"5px"},children:[e.jsxs("div",{className:"fs-2 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(z,{className:"display-6",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),h("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(y,{title:"Tanker Fuel Level",filllevel:t.graph1.totalTankFuel-t.graph1.fuelUnloaded,emptylevel:t.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(y,{title:"Jobs Completed",emptylevel:t.graph2.totalJob-t.graph2.jobCompleted,filllevel:t.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]})]})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>r(!s),className:`accordion-button ${s?"collapsed":""} fs-4`,type:"button",style:{color:s?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:h("Ongoing Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${s?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(ee,{currentTrip:t.myTrip})})})})]})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>x(!a),className:`accordion-button ${a?"collapsed":""} fs-4`,type:"button",style:{color:a?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:h("Previous Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${a?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(te,{prevJourney:t.prevJourney})})})})]})})]}),e.jsx("div",{style:{width:"40%",height:"99vh",display:window.innerWidth>950?"block":"none"},children:e.jsxs("div",{className:"p-2 py-3  rounded-3",style:{boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white",position:"relative",marginTop:"5px"},children:[e.jsxs("div",{className:"fs-2 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(z,{className:"display-6",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),h("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(y,{title:"Tanker Fuel Level",filllevel:t.graph1.totalTankFuel-t.graph1.fuelUnloaded,emptylevel:t.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(y,{title:"Jobs Completed",emptylevel:t.graph2.totalJob-t.graph2.jobCompleted,filllevel:t.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]})]})})]})}export{ne as default};
