import{r as l,u as J,g as F,f as A,e as $,j as e}from"./vendor-d1a31163.js";import{D as E,T as C,a as w,b as m,c as p,M as S,C as R,P as U}from"./MetricsCard-367b38be.js";import{M as W,B as x}from"./Box-f65f2bf3.js";import k from"./MapComponent-e7944319.js";import{a as z,b as Y,B as g,I as L}from"./index.esm-7adca8f5.js";import{a as q}from"./axios-d9b95618.js";import{T as v}from"./Tab-e259bd25.js";import"./installSVGRenderer-7788c1a1.js";import"./extendSxProp-4fc022a8.js";import"./react-is.production.min-ec3da07b.js";import"./useTheme-55d19bd2.js";import"./createSvgIcon-a8b447bb.js";function te(){const[a,I]=l.useState({distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0,profile:{driverName:"",driverLicenceNo:"",driverContactNo:""},graph1:{totalTankFuel:0,fuelUnloaded:0},graph2:{totalJob:0,jobCompleted:0},prevJourney:[],myTrip:[],alltime:{distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0},currentDeliveredPlanId:0}),[i,b]=l.useState(!0),[n,O]=l.useState(!1),[d,P]=l.useState(!0),[h,f]=l.useState("1"),[u,j]=l.useState([]),D=new URLSearchParams(window.location.search),{t,i18n:M}=J(),{driverId:y}=F(),{state:c}=A(),N=$(),T=async()=>{try{if(M.changeLanguage(D.get("lang")||"en"),y){let s=await q.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/dashboard/driver/metrics/${y}`);const{data:o}=s;s.data&&b(!1),I(o)}}catch(s){console.log(s),b(!1)}};l.useEffect(()=>{T();const s=setInterval(T,3e5);return()=>clearInterval(s)},[]);const[r,B]=l.useState(window.innerWidth);return l.useEffect(()=>{const s=()=>{B(window.innerWidth)};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[]),e.jsxs("div",{className:"d-flex align-items-start justify-content-between",children:[e.jsxs("div",{className:" mx-0 align-items-start ",style:{width:r>950?"60%":"100%",overflowY:"scroll",height:"99vh"},children:[e.jsxs("div",{className:"fs-4 mt-3 fw-bolder px-xl-5 px-lg-4 px-md-3 px-2",style:{color:"#626d77"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between ",children:[e.jsxs("div",{className:"d-flex align-items-center d-flex flex-wrap",children:[c.isback?e.jsx(z,{className:"fs-1 me-2",style:{color:"rgb(37, 99, 235)",cursor:"pointer"},onClick:()=>N(-1)}):"",a.profile.driverName,e.jsx("div",{className:"px-2 py-1 rounded-2 fs-6 mx-2",style:{backgroundColor:"rgb(37, 99, 235,0.1)",color:"rgb(37, 99, 235)",letterSpacing:"1px"},children:"Driver"}),e.jsx("div",{className:"spinner-border text-primary ",role:"status",style:{display:i?"block":"none"}})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[!c.isback&&c.statusId===3?e.jsxs("button",{className:"btn fs-6 rounded-3 mx-2 d-flex align-items-center",onClick:()=>N(`/driverassignment?token=${c.token}&tableview=true`),style:{backgroundColor:"rgb(37, 99, 235)",color:"white",letterSpacing:"1px"},children:[e.jsx(Y,{className:"me-1 fs-5"}),r>950?"Change Driver":""]}):"",e.jsx("a",{href:`tel:${a.profile.driverContactNo}`,style:{cursor:"pointer"},children:e.jsx(W,{className:"fs-3",style:{color:"rgb(37, 99, 235)",cursor:"pointer"}})})]})]}),e.jsx("hr",{style:{borderColor:"rgb(37, 99, 235)",borderWidth:"2px",marginBottom:"5px",marginTop:"10px"}}),e.jsxs("div",{className:`fs-3 fw-bold px-1 mb-1 mt-2 ${r>950?"ms-0":"ms-1"}`,style:{color:"#626d77"},children:[e.jsx(g,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),t("Overall Metrics")]})]}),e.jsx(E,{distanceCovered:a.alltime.distanceCovered,drivingTime:a.alltime.drivingTime,idleTime:a.alltime.idleTime,averageSpeed:a.alltime.averageSpeed}),e.jsx("div",{style:{display:r<=950?"block":"none"},children:e.jsx(x,{sx:{width:"100%"},children:e.jsxs(C,{value:h,children:[e.jsx(x,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(w,{centered:!0,onChange:(s,o)=>f(o),"aria-label":"lab API tabs example",children:[e.jsx(v,{disabled:!!i,className:"fw-bold fs-5",label:"Stats",value:"1"}),e.jsx(v,{disabled:!!i,className:"fw-bold fs-5",label:"Map",value:"2"})]})}),e.jsxs(m,{value:"1",className:"px-0",children:[e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-2 ms-1",style:{color:"#626d77"},children:[e.jsx(L,{className:"fs-2",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),t("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(p,{title:"Tanker Fuel Level",filllevel:a.graph1.totalTankFuel-a.graph1.fuelUnloaded,emptylevel:a.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(p,{title:"Jobs Completed",emptylevel:a.graph2.totalJob-a.graph2.jobCompleted,filllevel:a.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]}),e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1 mt-4 ms-1",style:{color:"#626d77"},children:[e.jsx(g,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),t("Current Metrics")]}),e.jsx(S,{distanceCovered:a.distanceCovered,drivingTime:a.drivingTime,idleTime:a.idleTime,averageSpeed:a.averageSpeed})]}),e.jsx(m,{value:"2",className:"p-0",children:e.jsx("div",{className:"",style:{height:r>950?"88vh":"50vh"},children:e.jsx(k,{deliveryPlanId:a.currentDeliveredPlanId,mapComponentData:u,setMapComponentData:j})})})]})})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>O(!n),className:`accordion-button ${n?"collapsed":""} fs-4`,type:"button",style:{color:n?"#626d77":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:t("Ongoing Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${n?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",style:{borderLeft:"8px solid #cfe2ff"},children:e.jsx("div",{className:"",children:e.jsx(R,{currentTrip:a.myTrip})})})})]})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3 mb-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>P(!d),className:`accordion-button ${d?"collapsed":""} fs-4`,type:"button",style:{color:d?"#626d77":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:t("Previous Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${d?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(U,{prevJourney:a.prevJourney})})})})]})})]}),e.jsx("div",{style:{width:"40%",display:r>950?"block":"none"},children:e.jsx("div",{className:"p-2 pt-2 mx-1 my-1  rounded-3",style:{boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white",position:"relative",marginTop:"0px"},children:e.jsx(x,{sx:{width:"100%"},children:e.jsxs(C,{value:h,children:[e.jsx(x,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(w,{centered:!0,onChange:(s,o)=>f(o),"aria-label":"lab API tabs example",children:[e.jsx(v,{disabled:!!i,className:"fw-bold fs-5",label:"Stats",value:"1"}),e.jsx(v,{disabled:!!i,className:"fw-bold fs-5",label:"Map",value:"2"})]})}),e.jsxs(m,{value:"1",className:"px-0",children:[e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1",style:{color:"#626d77"},children:[e.jsx(L,{className:"fs-2",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),t("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(p,{title:"Tanker Fuel Level",filllevel:a.graph1.totalTankFuel-a.graph1.fuelUnloaded,emptylevel:a.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(p,{title:"Jobs Completed",emptylevel:a.graph2.totalJob-a.graph2.jobCompleted,filllevel:a.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]}),e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1 mt-3",style:{color:"#626d77"},children:[e.jsx(g,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),t("Current Metrics")]}),e.jsx(S,{distanceCovered:a.distanceCovered,drivingTime:a.drivingTime,idleTime:a.idleTime,averageSpeed:a.averageSpeed})]}),e.jsx(m,{value:"2",className:"p-0",children:e.jsx("div",{className:"",style:{height:"88vh"},children:e.jsx(k,{deliveryPlanId:a.currentDeliveredPlanId,mapComponentData:u,setMapComponentData:j})})})]})})})})]})}export{te as default};
