import{r as e,u as E,e as T,f as $,j as a}from"./vendor-f48e548e.js";import{R as F}from"./ResponsiveTable-07c5d293.js";import{a as U}from"./assertThisInitialized-02748e78.js";import{k as J}from"./react-toastify.esm-81104cc6.js";/* empty css                      */import"./index-41ce01ef.js";import"./ButtonBase-a89ef7b4.js";import"./extendSxProp-246317be.js";import"./Select-7d29be83.js";import"./createSvgIcon-a28dcbb5.js";import"./useTheme-6bee9f51.js";import"./InputLabel-6317524e.js";function Z(){const[p,f]=e.useState([]),[g,m]=e.useState(0),[y,d]=e.useState(!0),[S,l]=e.useState(!1),[b,I]=e.useState(""),[x,h]=e.useState(""),[w,j]=e.useState(""),[c,k]=e.useState("false"),P=E(),{state:u}=T(),[D,A]=e.useState(""),s=new URLSearchParams(window.location.search),{t:O,i18n:L}=$();function R(t){return atob(t)}const B=async()=>{try{L.changeLanguage(s.get("lang")||"en");let t="";const n=s.get("token"),N=s.get("tableview");if(k(N),n&&(t=JSON.parse(R(n))),t){const r=t.deliveryPlanId;if(A(t.updatedBy),m(r),r){let _=await U.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/driver_available/${r}`);const{data:v}=_,i=v.driverAvailable.filter(o=>o.deliveryPlanId===r&&o.assigned===!0&&o.driverId===t.driverId);i.length>0&&(I(i[0].driverId),h(i[0].DeliveryPlanStatus),j(i[0].DeliveryPlanStatusId),u&&u.redirect===!1?l(!1):l(!0)),f(v.driverAvailable),d(!1)}}}catch(t){console.log(t),d(!1)}};return e.useEffect(()=>{B()},[]),a.jsxs(a.Fragment,{children:[a.jsx(J,{position:"top-center"}),y?a.jsx("div",{className:"my-3 d-flex justify-content-center align-items-center",children:a.jsx("div",{className:"spinner-border text-primary ",role:"status",style:{}})}):a.jsx(a.Fragment,{children:S&&(c==="false"||c===null)?P(`/driverdashboardweb/${b}`,{state:{isback:!1,status:x,statusId:w,token:s.get("token")}}):a.jsx(F,{data:p,deliveryPlanId:g,updatedBy:D,token:s.get("token")})})]})}export{Z as default};
