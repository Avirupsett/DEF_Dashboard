import{r as e,u as B,e as E,f as T,j as a}from"./vendor-f48e548e.js";import{R as $}from"./ResponsiveTable-f305baa9.js";import{a as F}from"./axios-aa9cae93.js";import{k as J}from"./react-toastify.esm-81104cc6.js";/* empty css                      */import"./index-41ce01ef.js";function K(){const[f,g]=e.useState([]),[p,m]=e.useState(0),[y,l]=e.useState(!0),[b,c]=e.useState(!1),[S,I]=e.useState(""),[x,h]=e.useState(""),[w,j]=e.useState(""),[u,P]=e.useState("false"),k=B(),{state:n}=E(),D=n.updatedBy,s=new URLSearchParams(window.location.search),{t:O,i18n:A}=T();function L(t){return atob(t)}const R=async()=>{try{A.changeLanguage(s.get("lang")||"en");let t="";const o=s.get("token"),N=s.get("tableview");if(P(N),o&&(t=JSON.parse(L(o))),t){const r=t.deliveryPlanId;if(m(r),r){let _=await F.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/driver_available/${r}`);const{data:v}=_,i=v.driverAvailable.filter(d=>d.deliveryPlanId===r&&d.assigned===!0&&d.driverId===t.driverId);i.length>0&&(I(i[0].driverId),h(i[0].DeliveryPlanStatus),j(i[0].DeliveryPlanStatusId),n&&n.redirect===!1?c(!1):c(!0)),g(v.driverAvailable),l(!1)}}}catch(t){console.log(t),l(!1)}};return e.useEffect(()=>{R()},[]),a.jsxs(a.Fragment,{children:[a.jsx(J,{position:"top-center"}),y?a.jsx("div",{className:"my-3 d-flex justify-content-center align-items-center",children:a.jsx("div",{className:"spinner-border text-primary ",role:"status",style:{}})}):a.jsx(a.Fragment,{children:b&&(u==="false"||u===null)?k(`/driverdashboardweb/${S}`,{state:{isback:!1,status:x,statusId:w,token:s.get("token")}}):a.jsx($,{data:f,deliveryPlanId:p,updatedBy:D})})]})}export{K as default};
