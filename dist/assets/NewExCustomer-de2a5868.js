import{_ as K}from"./index-9ba4bd12.js";import{r as c,u as ze,K as Le,j as o,I as Ae,T as Re,O as He,P as We,Q as Ge,R as ae,i as Ue,A as qe,B as Ye,C as Je,E as Qe,G as Ke,a as P}from"./vendor-fe8b2466.js";import{L as fe,R as Xe}from"./index-e2efe08c.js";import{k as Ze,l as et,Q as D,a as X,f as we,b as pe}from"./NotoSansDevanagari-VariableFont_wdth_wght-44d29469.js";const tt="_piechart_1hrwn_11",ot="_chartContainer_1hrwn_23",nt="_legendButtonContainer_1hrwn_49",st="_legendButton_1hrwn_49",at="_codeBlockIcon_1hrwn_133",rt="_lightMode_1hrwn_191",lt="_dateFilter_1hrwn_195",it="_officefilter_1hrwn_351",ut="_topContainer_1hrwn_443",ct="_darkMode_1hrwn_463",dt="_iconsContainer_1hrwn_631",mt="_icon_1hrwn_631",Ct="_exportOptions_1hrwn_715",ht="_exportOption_1hrwn_715",gt="_NoDataOverlay_1hrwn_861",ft="_tableContainer_1hrwn_993",wt="_table_1hrwn_993",pt="_summaryHeader_1hrwn_1029",xt="_periodHeader_1hrwn_1037",bt="_closeButton_1hrwn_1069",yt="_tableWrapper_1hrwn_1099",Nt="_loadingOverlay_1hrwn_1107",St="_loadingSpinner_1hrwn_1133",_t="_boldOption_1hrwn_1145",Tt="_optionGroup_1hrwn_1155",w={piechart:tt,chartContainer:ot,"legend-text":"_legend-text_1hrwn_31",legendButtonContainer:nt,legendButton:st,codeBlockIcon:at,lightMode:rt,"label-text":"_label-text_1hrwn_191",dateFilter:lt,officefilter:it,topContainer:ut,darkMode:ct,"theme-container":"_theme-container_1hrwn_473",iconsContainer:dt,icon:mt,exportOptions:Ct,exportOption:ht,NoDataOverlay:gt,tableContainer:ft,table:wt,summaryHeader:pt,periodHeader:xt,closeButton:bt,tableWrapper:yt,loadingOverlay:Nt,loadingSpinner:St,boldOption:_t,optionGroup:Tt},Pt=({themeMode:V,selectedRange:v,selectedOffice:Ft,isAdmin:vt,alldata:kt,showGraph:re,officeName:O,isLoading:le,newExData:ie})=>{const[xe,Dt]=c.useState([]),[Z,H]=c.useState(!1),ee=c.useRef(null),te=c.useRef(null),ue=c.useRef(null),{t:s}=ze(),[$t,ce]=c.useState(!1),[W,L]=c.useState([]),[be,Bt]=c.useState(!0),[G,A]=c.useState(!1),[u,ye]=c.useState("Name"),[d,Ne]=c.useState([]),[m,Se]=c.useState([]),[C,_e]=c.useState([]);c.useState(5),c.useState([]);const[I,U]=c.useState(!1),[b,oe]=c.useState("Customers");c.useState([]),c.useState([]),c.useState([]),c.useEffect(()=>{me(v[0]),me(v[1]),(async()=>{try{const t=ie;if(t.graph1){U(!1);const n=t.graph1.byName,i=t.graph1.byMobile,a=t.graph1.byVehicle,l=n.existingCustomerCount,h=n.newCustomerCount,p=i.existingCustomerCount,B=i.newCustomerCount,S=a.existingCustomerCount,_=a.newCustomerCount;Ne({existingCustomerCount:l,newCustomerCount:h,existingCustomer:n.existingCustomer,newCustomer:n.newCustomer}),Se({existingCustomerCount:p,newCustomerCount:B,existingCustomer:i.existingCustomer,newCustomer:i.newCustomer}),_e({existingCustomerCount:S,newCustomerCount:_,existingCustomer:a.existingCustomer,newCustomer:a.newCustomer});let r=[];switch(u){case"Name":r=[{"#":1,CustomerName:"Existing Customers","Total Count":l},{"#":2,CustomerName:"New Customers","Total Count":h}];break;case"Mobile":r=[{"#":1,CustomerName:"Existing Customers","Total Count":p},{"#":2,CustomerName:"New Customers","Total Count":B}];break;case"Vehicle":r=[{"#":1,CustomerName:"Existing Customers","Total Count":S},{"#":2,CustomerName:"New Customers","Total Count":_}];break;default:return}L(r)}}catch(t){console.error("Error fetching data:",t)}})()},[ie]);const de=()=>{switch(u){case"Name":return d.existingCustomerCount===0&&d.newCustomerCount===0?{}:{existingCustomerCount:d.existingCustomerCount,newCustomerCount:d.newCustomerCount};case"Mobile":return m.existingCustomerCount===0&&m.newCustomerCount===0?{}:{existingCustomerCount:m.existingCustomerCount,newCustomerCount:m.newCustomerCount};case"Vehicle":return C.existingCustomerCount===0&&C.newCustomerCount===0?{}:{existingCustomerCount:C.existingCustomerCount,newCustomerCount:C.newCustomerCount};default:return{}}};function q(e,t){var n=parseInt(e.substring(1,3),16),i=parseInt(e.substring(3,5),16),a=parseInt(e.substring(5,7),16);n=parseInt(n*(100+t)/100),i=parseInt(i*(100+t)/100),a=parseInt(a*(100+t)/100),n=n<255?n:255,i=i<255?i:255,a=a<255?a:255,n=Math.round(n),i=Math.round(i),a=Math.round(a);var l=n.toString(16).length==1?"0"+n.toString(16):n.toString(16),h=i.toString(16).length==1?"0"+i.toString(16):i.toString(16),p=a.toString(16).length==1?"0"+a.toString(16):a.toString(16);return"#"+l+h+p}const Te={title:{left:"center",textStyle:{color:"#333",fontSize:16}},tooltip:{trigger:"item",formatter:e=>{const t=Math.round(e.percent);return`${e.seriesName} <br/>${e.name}: ${e.value} (${t}%)`}},legend:{orient:"horizontal",bottom:0,data:["Existing Customers","New Customers"],textStyle:{color:V==="dark"?"#ffffff":"#000000",fontSize:window.innerWidth<=1496?12:14,padding:4}},series:[{name:"Customers",type:"pie",radius:["35%","70%"],center:["50%","40%"],avoidLabelOverlap:!0,label:{show:!0,position:"inside",formatter:e=>{const t=Math.round(e.percent);return t>0?`${t}%`:""},fontSize:15,fontWeight:"bold",color:"white"},emphasis:{label:{show:!0,fontSize:15,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:de().existingCustomerCount,name:"Existing Customers",itemStyle:{color:new fe(0,1,0,0,[{offset:1,color:q("#8080ff",10)},{offset:0,color:q("#8080ff",-10)}])}},{value:de().newCustomerCount,name:"New Customers",itemStyle:{color:new fe(0,1,0,0,[{offset:1,color:q("#3cb043",10)},{offset:0,color:q("#3cb043",-10)}])}}],itemStyle:{borderWidth:2,borderColor:"#ffffff00",borderRadius:4}}]},Y=e=>{let t="";const n=new Uint8Array(e),i=n.byteLength;for(let a=0;a<i;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)},$=e=>{if(!e)return"";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getDate()).padStart(2,"0")}-${n}-${t}`},me=e=>{if(!e)return"";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`},Fe=async()=>{const e=D.loading("Please wait..."),t=$(v[0]),n=$(v[1]),i=await K(()=>import("./exceljs.min-9dc286db.js").then(h=>h.e),["assets/exceljs.min-9dc286db.js","assets/vendor-fe8b2466.js"]),a=new i.Workbook,l=a.addWorksheet("Data");fetch(X).then(h=>h.blob()).then(async h=>{const p=new FileReader;p.onload=async function(){const B=p.result,S=a.addImage({base64:B,extension:"png"});l.addImage(S,{tl:{col:0,row:0},ext:{width:100,height:60}});const _=l.getCell("A1");_.value=`${s("Customers Summary Data")} (${O})`,_.font={bold:!0,color:{argb:"000000"},size:14},_.alignment={vertical:"middle",horizontal:"center"},l.mergeCells("A1:C1");const r=l.getCell("A2");r.value=`${s("Period")}: ${t} ${s("to")} ${n}`,r.font={bold:!0,color:{argb:"000000"},size:12},r.alignment={horizontal:"center"},l.mergeCells("A2:C2"),l.getColumn(1).width=15,l.getColumn(2).width=50,l.getColumn(3).width=15;const E=l.addRow([s("#"),s("Customer Type"),s("Total Count")]);E.font={bold:!0,color:{argb:"000000"},size:12},E.eachCell(y=>{y.font={bold:!0,color:{argb:"000000"},size:12},y.border={bottom:{style:"thin",color:{argb:"000000"}}}});let x=[];switch(u){case"Name":x=[{"#":1,CustomerName:"Existing Customers","Total Count":d.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":d.newCustomerCount}];break;case"Mobile":x=[{"#":1,CustomerName:"Existing Customers","Total Count":m.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":m.newCustomerCount}];break;case"Vehicle":x=[{"#":1,CustomerName:"Existing Customers","Total Count":C.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":C.newCustomerCount}];break;default:return}const j=x.reduce((y,g)=>y+g["Total Count"],0);x.push({"#":"",CustomerName:"Total","Total Count":j}),x.forEach((y,g)=>{const f=l.addRow([g+1,y.CustomerName,y["Total Count"]]);f.getCell(1).alignment={horizontal:"left"},f.getCell(2).alignment={horizontal:"left"},f.getCell(3).alignment={horizontal:"right"}});const z=`${Date.now()}Customers_Summary_by${u}${O}${t}_${n}.xlsx`;a.xlsx.writeBuffer().then(async y=>{const g=new FormData;g.append("file",new Blob([y]),z);try{const f=await P.post("http://115.124.120.251:5064/api/uploader",g,{headers:{"Content-Type":"multipart/form-data"}});f.status==200?D.update(e,{render:"Download Starting...",type:"success",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1}):D.update(e,{render:"Download Failed !",type:"error",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1});const T=f.data.url;window.location.href=`http://115.124.120.251:5064/static/downloads/${T}`}catch(f){console.error("Error saving Excel file:",f)}})},p.readAsDataURL(h)})},ve=async()=>{const e=D.loading("Please wait..."),t=$(v[0]),n=$(v[1]),i=await K(()=>import("./exceljs.min-9dc286db.js").then(h=>h.e),["assets/exceljs.min-9dc286db.js","assets/vendor-fe8b2466.js"]),a=new i.Workbook,l=a.addWorksheet("Data");fetch(X).then(h=>h.blob()).then(async h=>{const p=new FileReader;p.onload=async function(){const B=p.result,S=a.addImage({base64:B,extension:"png"});l.addImage(S,{tl:{col:0,row:0},ext:{width:100,height:60}});const _=l.getCell("A1");_.value=`${b} (${O})`,_.font={bold:!0,color:{argb:"000000"},size:14},_.alignment={vertical:"middle",horizontal:"center"},l.mergeCells("A1:C1");const r=l.getCell("A2");r.value=`${s("Period")}: ${t} ${s("to")} ${n}`,r.font={bold:!0,color:{argb:"000000"},size:12},r.alignment={horizontal:"center"},l.mergeCells("A2:D2"),l.getColumn(1).width=15,l.getColumn(2).width=50,l.getColumn(3).width=15;const E=l.addRow([s("#"),s(u),s("Count")]);E.font={bold:!0,color:{argb:"000000"},size:12},E.eachCell(g=>{g.font={bold:!0,color:{argb:"000000"},size:12},g.border={bottom:{style:"thin",color:{argb:"000000"}}}});let x=[];switch(u){case"Name":x=b==="Existing Customers"?d.existingCustomer:d.newCustomer;break;case"Mobile":x=b==="Existing Customers"?m.existingCustomer:m.newCustomer;break;case"Vehicle":x=b==="Existing Customers"?C.existingCustomer:C.newCustomer;break;default:return}x.forEach((g,f)=>{const T=l.addRow([f+1,g[u==="Name"?"CustomerName":u==="Mobile"?"MobileNo":"VehicleNo"],g.totalCount]);T.getCell(1).alignment={horizontal:"left"},T.getCell(2).alignment={horizontal:"left"},T.getCell(3).alignment={horizontal:"right"}});const j=x.reduce((g,f)=>g+f.totalCount,0),M=l.addRow(["","Total",j]);M.font={bold:!0},M.getCell(2).alignment={horizontal:"left"};const y=`${Date.now()} ${b}${O}${t}_${n}.xlsx`;a.xlsx.writeBuffer().then(async g=>{const f=new FormData;f.append("file",new Blob([g]),y);try{const T=await P.post("http://115.124.120.251:5064/api/uploader",f,{headers:{"Content-Type":"multipart/form-data"}});T.status==200?D.update(e,{render:"Download Starting...",type:"success",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1}):D.update(e,{render:"Download Failed !",type:"error",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1});const F=T.data.url;window.location.href=`http://115.124.120.251:5064/static/downloads/${F}`}catch(T){console.error("Error saving Excel file:",T)}})},p.readAsDataURL(h)})},ke=async()=>{const e=D.loading("Please wait..."),t=$(v[0]),n=$(v[1]),a=new URLSearchParams(window.location.search).get("lang"),l=await P.get(we,{responseType:"arraybuffer"}),h=Y(l.data),p=await P.get(pe,{responseType:"arraybuffer"}),B=Y(p.data);K(()=>import("./NotoSansDevanagari-VariableFont_wdth_wght-44d29469.js").then(S=>S.j),["assets/NotoSansDevanagari-VariableFont_wdth_wght-44d29469.js","assets/vendor-fe8b2466.js","assets/index-9ba4bd12.js","assets/index-0653e607.css","assets/NotoSansDevanagari-VariableFont_wdth_wght-55fec1ff.css"]).then(async S=>{let _=S.default;const r=new _;r.addFileToVFS("NotoSansBengali.ttf",h),r.addFont("NotoSansBengali.ttf","NotoSansBengali","normal"),r.setFont("NotoSansBengali"),r.addFileToVFS("NotoSansDevanagari.ttf",B),r.addFont("NotoSansDevanagari.ttf","NotoSansDevanagari","normal"),r.setFont("NotoSansDevanagari");const E=[[s("#"),s("Customer Type"),s("Total Count")]],x={0:{halign:"center"},1:{halign:"center"},2:{halign:"center"}},j={fontSize:12,fontStyle:"bold",halign:"center"},M={summaryHeader:"#3CB043",secondHeader:"#75AAF0"},z=X,y=35,g=20;r.addImage(z,"PNG",15,12,y,g);const f=[[`${s("Customers Summary Data")} (${O})`]];r.autoTable({head:f,body:[],headStyles:{...j,fillColor:M.summaryHeader,textColor:"#FFFFFF"},margin:{top:30},styles:{font:a==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}});const T=[[`${s("Period")}: ${t} ${s("to")} ${n}`]];r.autoTable({startY:39.5,head:T,body:[],headStyles:{fontSize:12,fontStyle:"bold",halign:"center",fillColor:"#3CB043",textColor:"#FFFFFF"},margin:{top:30},styles:{font:a==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}});let F=[];switch(u){case"Name":F=[{"#":1,CustomerName:"Existing Customers","Total Count":d.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":d.newCustomerCount}];break;case"Mobile":F=[{"#":1,CustomerName:"Existing Customers","Total Count":m.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":m.newCustomerCount}];break;case"Vehicle":F=[{"#":1,CustomerName:"Existing Customers","Total Count":C.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":C.newCustomerCount}];break;default:return}const J=F.reduce((k,N)=>k+N["Total Count"],0);F.push({"#":"",CustomerName:"Total","Total Count":J});let Ce=F.map((k,N)=>[N+1,k.CustomerName,k["Total Count"]]);const ne={startY:r.autoTable.previous.finalY+1,head:E,body:Ce,headStyles:{...j,fillColor:M.secondHeader,textColor:"#FFFFFF"},columnStyles:x,styles:{font:a==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}};r.autoTable(ne);const ge=`${Date.now()}Customers_Summary_by${u}${O}${t}_${n}.pdf`,se=r.output("blob"),Q=new FormData;Q.append("file",se,ge);try{const k=await P.post("http://115.124.120.251:5064/api/uploader",Q,{headers:{"Content-Type":"multipart/form-data"}});k.status==200?D.update(e,{render:"Download Starting...",type:"success",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1}):D.update(e,{render:"Download Failed !",type:"error",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1});const N=await k.data.url;window.location.href=`http://115.124.120.251:5064/static/downloads/${N}`}catch(k){console.error("Error saving PDF file:",k)}})},De=async()=>{const e=D.loading("Please wait..."),t=$(v[0]),n=$(v[1]),a=new URLSearchParams(window.location.search).get("lang"),l=await P.get(we,{responseType:"arraybuffer"}),h=Y(l.data),p=await P.get(pe,{responseType:"arraybuffer"}),B=Y(p.data);K(()=>import("./NotoSansDevanagari-VariableFont_wdth_wght-44d29469.js").then(S=>S.j),["assets/NotoSansDevanagari-VariableFont_wdth_wght-44d29469.js","assets/vendor-fe8b2466.js","assets/index-9ba4bd12.js","assets/index-0653e607.css","assets/NotoSansDevanagari-VariableFont_wdth_wght-55fec1ff.css"]).then(async S=>{let _=S.default;const r=new _;r.addFileToVFS("NotoSansBengali.ttf",h),r.addFont("NotoSansBengali.ttf","NotoSansBengali","normal"),r.setFont("NotoSansBengali"),r.addFileToVFS("NotoSansDevanagari.ttf",B),r.addFont("NotoSansDevanagari.ttf","NotoSansDevanagari","normal"),r.setFont("NotoSansDevanagari");const E=[[s("#"),s(u),s("Count")]],x={0:{halign:"center"},1:{halign:"center"},2:{halign:"center"}},j={fontSize:12,fontStyle:"bold",halign:"center"},M={summaryHeader:"#3CB043",secondHeader:"#75AAF0"},z=X,y=35,g=20;r.addImage(z,"PNG",15,12,y,g);const f=[[`${b} (${O})`]];r.autoTable({head:f,body:[],headStyles:{...j,fillColor:M.summaryHeader,textColor:"#FFFFFF"},margin:{top:30},styles:{font:a==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}});const T=[[`${s("Period")}: ${t} ${s("to")} ${n}`]];r.autoTable({startY:39.5,head:T,body:[],headStyles:{fontSize:12,fontStyle:"bold",halign:"center",fillColor:"#3CB043",textColor:"#FFFFFF"},margin:{top:30},styles:{font:a==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}});let F=[];switch(u){case"Name":F=b==="Existing Customers"?d.existingCustomer:d.newCustomer;break;case"Mobile":F=b==="Existing Customers"?m.existingCustomer:m.newCustomer;break;case"Vehicle":F=b==="Existing Customers"?C.existingCustomer:C.newCustomer;break;default:return}let J=F.map((N,R)=>[R+1,N[u==="Name"?"CustomerName":u==="Mobile"?"MobileNo":"VehicleNo"],N.totalCount]);const ne=["","Total",F.reduce((N,R)=>N+R.totalCount,0)];J.push(ne);const he={startY:r.autoTable.previous.finalY+1,head:E,body:J,headStyles:{...j,fillColor:M.secondHeader,textColor:"#FFFFFF"},columnStyles:x,styles:{font:a==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}};r.autoTable(he);const se=`${Date.now()}Sales_of_${b}${O}${t}_${n}.pdf`,Q=r.output("blob"),k=new FormData;k.append("file",Q,se);try{const N=await P.post("http://115.124.120.251:5064/api/uploader",k,{headers:{"Content-Type":"multipart/form-data"}});N.status==200?D.update(e,{render:"Download Starting...",type:"success",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1}):D.update(e,{render:"Download Failed !",type:"error",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1});const R=await N.data.url;window.location.href=`http://115.124.120.251:5064/static/downloads/${R}`}catch(N){console.error("Error saving PDF file:",N)}})};c.useEffect(()=>{const e=t=>{ee.current&&!ee.current.contains(t.target)&&te.current&&!te.current.contains(t.target)&&t.target.tagName!=="svg"&&t.target.tagName!=="path"&&H(!1),ue.current&&!ue.current.contains(t.target)&&ce(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),c.useEffect(()=>{A(!re)},[re]);const $e=e=>{const t=e.target.value;if(ye(t),I===!0){let n=[];switch(t){case"Name":n=b==="Existing Customers"?d.existingCustomer:d.newCustomer;break;case"Mobile":n=b==="Existing Customers"?m.existingCustomer:m.newCustomer;break;case"Vehicle":n=b==="Existing Customers"?C.existingCustomer:C.newCustomer;break;default:return}const i=n.map((a,l)=>({"#":l+1,[t==="Name"?"CustomerName":t==="Mobile"?"MobileNo":"VehicleNo"]:a[t==="Name"?"CustomerName":t==="Mobile"?"MobileNo":"VehicleNo"],"Total Count":a.totalCount}));L(i)}else{let n=[];switch(t){case"Name":n=[{"#":1,CustomerName:"Existing Customers","Total Count":d.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":d.newCustomerCount}];break;case"Mobile":n=[{"#":1,CustomerName:"Existing Customers","Total Count":m.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":m.newCustomerCount}];break;case"Vehicle":n=[{"#":1,CustomerName:"Existing Customers","Total Count":C.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":C.newCustomerCount}];break;default:return}L(n)}},Be=e=>{if(e&&e.data&&e.dataIndex>=0){e.dataIndex;const t=e.data.name;let n=[];switch(console.log(e),u){case"Name":n=t==="Existing Customers"?d.existingCustomer:d.newCustomer;break;case"Mobile":n=t==="Existing Customers"?m.existingCustomer:m.newCustomer;break;case"Vehicle":n=t==="Existing Customers"?C.existingCustomer:C.newCustomer;break;default:return}const i=n.map((a,l)=>({"#":l+1,[u==="Name"?"CustomerName":u==="Mobile"?"MobileNo":"VehicleNo"]:a[u==="Name"?"CustomerName":u==="Mobile"?"MobileNo":"VehicleNo"],"Total Count":a.totalCount}));console.log(t),L(i),A(!0),oe(t),U(!0)}},Ee=Le({typography:{button:{textTransform:"none"}}}),je=()=>{U(!1),A(!1),oe("Customers")},Me=()=>{ce(!1),H(!Z)},Oe=()=>{U(!1),H(!1),A(!G),oe("Customers")},Pe=()=>{let e=[];switch(u){case"Name":e=[{"#":1,CustomerName:"Existing Customers","Total Count":d.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":d.newCustomerCount}];break;case"Mobile":e=[{"#":1,CustomerName:"Existing Customers","Total Count":m.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":m.newCustomerCount}];break;case"Vehicle":e=[{"#":1,CustomerName:"Existing Customers","Total Count":C.existingCustomerCount},{"#":2,CustomerName:"New Customers","Total Count":C.newCustomerCount}];break;default:return}L(e),A(!0),H(!1)},Ie=$(v[0]),Ve=$(v[1]);return o.jsx(o.Fragment,{children:o.jsxs("div",{className:`${w.chartContainer} ${V==="dark"?w.darkMode:w.lightMode}`,children:[o.jsx(Ze,{position:"top-center",theme:V}),o.jsx("div",{className:"container-fluid",children:o.jsxs("div",{className:"d-flex w-100 g-0 align-items-center justify-content-between",children:[I?o.jsx("div",{title:"Previous",className:w.resetButtonContainer,children:o.jsx("button",{title:"Previous",className:`btn btn-primary mx-1 ${window.innerWidth<500?"btn-sm":""} shadow border-2 border-white`,onClick:je,children:o.jsx(Ae,{style:{fontSize:"1rem"}})})}):null,o.jsx("div",{className:"d-flex align-items-center",children:o.jsx(Re,{theme:Ee,children:o.jsxs(He,{sx:{mx:1,mt:1,minWidth:120},size:"small",children:[o.jsx(We,{id:"demo-simple-select-helper-label",style:{color:"var(--text-color)",fontFamily:'"Public Sans", sans-serif !important'},children:s(b)}),o.jsxs(Ge,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",displayEmpty:!0,value:u,onChange:$e,style:{color:"var(--text-color)",fontFamily:'"Public Sans", sans-serif !important'},label:s(b),children:[o.jsx(ae,{style:{color:"var(--text-color)",fontFamily:'"Public Sans", sans-serif !important'},value:"Name",children:s("Name")}),o.jsx(ae,{style:{color:"var(--text-color)",fontFamily:'"Public Sans", sans-serif !important'},value:"Mobile",children:s("Mobile")}),o.jsx(ae,{style:{color:"var(--text-color)",fontFamily:'"Public Sans", sans-serif !important'},value:"Vehicle",children:s("Vehicle")})]})]})})}),o.jsx("div",{title:"Export Options",className:"d-flex g-0",ref:ee,children:o.jsxs("div",{className:`${w.iconsContainer} d-flex justify-content-center align-items-center`,children:[o.jsx("div",{className:`${w.icon} ${V==="dark"?w.darkMode:w.lightMode} px-2 py-1`,onClick:Me,children:Z?o.jsx(Ue,{style:{fontSize:"1.1rem"}}):o.jsx(qe,{style:{fontSize:"1.1rem"}})}),Z&&o.jsxs("div",{className:`${w.exportOptions} ${V==="dark"?w.darkMode:w.lightMode}`,ref:te,children:[G?o.jsxs("div",{className:w.exportOption,onClick:Oe,children:[o.jsx(Je,{style:{fontSize:"1.1rem",color:"#6c3fb5"}}),o.jsx("span",{children:s("View Graph")})]}):o.jsxs("div",{className:w.exportOption,onClick:Pe,children:[o.jsx(Ye,{style:{fontSize:"1.1rem",color:"#0d6efd"}}),o.jsx("span",{children:s("View Table")})]}),o.jsxs("div",{className:w.exportOption,onClick:I?ve:Fe,children:[o.jsx(Qe,{style:{fontSize:"1.1rem",color:"green"}}),o.jsx("span",{children:s("Export to Excel")})]}),o.jsxs("div",{className:w.exportOption,onClick:I?De:ke,children:[o.jsx(Ke,{style:{fontSize:"1.1rem",color:"red"}}),o.jsx("span",{children:s("Export to PDF")})]})]})]})})]})}),le&&o.jsx("div",{className:w.loadingOverlay,children:o.jsx("img",{src:et,alt:"Loading...",width:50,height:50})}),W.reduce((e,t)=>e+t["Total Count"],0)==0&&!G&&!le?o.jsx("div",{className:`${w.NoDataOverlay} fs-5`,children:s("No Data Found")}):null,G?o.jsx("div",{className:"container-fluid mt-2 table-responsive",style:{height:"290px"},children:o.jsxs("table",{className:`table ${V=="dark"?"table-dark":""}`,children:[o.jsxs("thead",{children:[o.jsx("tr",{children:o.jsxs("th",{colSpan:"3",style:{textAlign:"center"},children:[s("Period"),": ",Ie," ",s("to")," ",Ve]})}),o.jsxs("tr",{children:[o.jsx("th",{scope:"col",children:"#"}),o.jsx("th",{scope:"col",children:s(I===!0?u==="Name"?"Customer Name":u==="Mobile"?"Mobile No":"Vehicle No":"Customer Type")}),o.jsx("th",{scope:"col",children:I==!0?s("Count"):s("Total Count")})]})]}),o.jsxs("tbody",{children:[W.map((e,t)=>o.jsxs("tr",{children:[o.jsx("th",{scope:"row",children:t+1}),o.jsxs("td",{children:[" ",I===!0?u==="Name"?e.CustomerName:u==="Mobile"?e.MobileNo:e.VehicleNo:e.CustomerName]}),o.jsx("td",{children:e["Total Count"]})]},t)),W.length>0&&o.jsxs("tr",{children:[o.jsx("th",{scope:"row"}),o.jsx("td",{children:s("Total")}),o.jsx("td",{children:W.reduce((e,t)=>e+t["Total Count"],0)})]})]})]})}):o.jsx(Xe,{option:Te,notMerge:be,style:{height:"297px",width:"100%",maxWidth:"2300px"},className:w.piechart,onEvents:{click:Be}},xe.length)]})})};export{Pt as default};
