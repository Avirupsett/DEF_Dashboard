import{j as e,d as c,r as m,u as I}from"./vendor-36ea1262.js";import{G as S,F as u,a as k}from"./axios-67c74b23.js";import{F as y,G as R,I as P,a as D,b as F}from"./index.esm-bf418bb2.js";import{T as U,t as H,a as L,b as A,c as O,d as W,e as E,f as B}from"./TimelineSeparator-28189d14.js";import{u as J,i as G,L as _,a as Q,b as V,c as Y,d as q,e as K,f as X}from"./installSVGRenderer-7788c1a1.js";import"./isMuiElement-03f9640f.js";function Z(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}}]})(t)}function ee(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"}}]})(t)}function te(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M4 15v3c0 2.21 1.79 4 4 4h8c2.21 0 4-1.79 4-4v-3H4zM20 13v-3c0-1.86-1.28-3.41-3-3.86V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2.14c-1.72.45-3 2-3 3.86v3h16zM9 4h6v2h-2c0-.55-.45-1-1-1s-1 .45-1 1H9V4z"}}]})(t)}function M(t){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z"}},{tag:"circle",attr:{cx:"12",cy:"9",r:"2.5"}}]})(t)}function se(t){return e.jsxs("div",{className:"d-flex align-items-center justify-content-center my-2 flex-wrap",children:[e.jsxs("div",{className:"px-2 rounded-3 py-3 mt-1 mx-2 ",style:{width:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"rgb(22 101 52 / 11%)",borderRadius:"10px",display:"inline-block"},children:e.jsx(u,{className:"",style:{fontSize:"22px",color:"rgb(22 101 52)"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[y(t.drivingTime)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"hrs"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:c("Driving Time")})]}),e.jsxs("div",{className:"px-2 rounded-3 py-3 mt-1 mx-2 ",style:{width:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"#FECACA",borderRadius:"10px",display:"inline-block"},children:e.jsx(M,{className:"",style:{fontSize:"22px",color:"#DC2626"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[y(t.distanceCovered)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"km"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:c("Distance")})]}),e.jsxs("div",{className:"px-2 rounded-3 py-3 mt-1 mx-2 ",style:{width:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"rgb(22 101 52 / 11%)",borderRadius:"10px",display:"inline-block"},children:e.jsx(R,{className:"",style:{fontSize:"22px",color:"rgb(22 101 52)"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[y(t.idleTime)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"hrs"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:c("Idle Time")})]}),e.jsxs("div",{className:"px-2 rounded-3 py-3 mt-1 mx-2 ",style:{width:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"#DBEAFE",borderRadius:"10px",display:"inline-block"},children:e.jsx(P,{className:"",style:{fontSize:"22px",color:"#2563EB"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[y(t.averageSpeed)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"km/hr"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:c("Avg. Speed")})]})]})}function le(t){return e.jsx(e.Fragment,{children:t.currentTrip.length>0?e.jsx(U,{position:"right",className:"d-flex align-items-stretch",sx:{[`& .${H.root}`]:{flex:.1}},children:t.currentTrip&&t.currentTrip.map((l,r)=>l.Status==="Delivered"?e.jsxs(L,{children:[e.jsx(A,{color:"#918f97",children:e.jsx("div",{className:"fw-bolder",style:{fontSize:"24px",paddingTop:"2px",color:"rgb(22 101 52)"},children:"Delivered"})}),e.jsxs(O,{children:[e.jsx(W,{style:{borderWidth:"2px",backgroundColor:"rgb(22 101 52 / 11%)"},children:e.jsx(Z,{className:"fs-5",style:{color:"rgb(22 101 52)"}})}),e.jsx(E,{style:{borderStyle:"dashed",backgroundColor:"transparent",borderWidth:"2.5px"}})]}),e.jsx(B,{children:e.jsxs("div",{style:{borderTop:"2px solid #918f9750",paddingTop:"12px",marginTop:"20px",paddingLeft:"5px",borderBottom:"2px solid #918f9750",paddingBottom:"12px"},children:[e.jsx("div",{className:"fw-bolder",style:{color:"#15283b",fontSize:"20px"},children:l.officeName}),e.jsx("div",{className:"",style:{color:"#918f97"},children:"Address"}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(u,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",l.DeliveredTime]}),e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(D,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"#4338CA",backgroundColor:"#E0E7FF"}})," Delivered Qty: ",e.jsxs("span",{style:{color:"#4338CA",fontWeight:600,marginLeft:"5px",textWrap:"nowrap"},children:[" ",l.Quantity]})]})]})]})})]},r):e.jsxs(L,{children:[e.jsx(A,{color:"#918f97",children:e.jsx("div",{className:"fw-bolder",style:{color:"#CA8A04",fontSize:"22px",width:"112px"},children:"Pending"})}),e.jsxs(O,{children:[e.jsx(W,{style:{borderWidth:"9px",backgroundColor:"#FEF3C7"}}),e.jsx(E,{style:{borderStyle:"dashed",backgroundColor:"transparent",borderWidth:"2.5px"}})]}),e.jsx(B,{children:e.jsxs("div",{style:{borderTop:"2px solid #918f9750",paddingTop:"12px",marginTop:"20px",paddingLeft:"5px",borderBottom:"2px solid #918f9750",paddingBottom:"12px"},children:[e.jsx("div",{className:"fw-bolder",style:{color:"#15283b",fontSize:"20px"},children:l.officeName}),e.jsx("div",{className:"",style:{color:"#918f97"},children:"Address"}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(u,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)",textWrap:"nowrap"}})," _ _ _ _"]}),e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(D,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"#4338CA",backgroundColor:"#E0E7FF"}})," Delivered Qty: ",e.jsx("span",{style:{color:"#4338CA",fontWeight:600,marginLeft:"5px",textWrap:"nowrap"},children:" 0 L"})]})]})]})})]},r))}):e.jsx("div",{className:"text-center fs-5 py-3",children:"No Trips Found"})})}J([Q,V,Y,q,K,X]);function N({title:t,filllevel:l,emptylevel:r,fillTitle:d,emptyTitle:s}){const a=m.useRef();return m.useEffect(()=>{const o=a.current,x=G(o,null,{renderer:"svg"}),n={title:{text:`${l+r>0?(l/(l+r)*100).toFixed(0):0}%`,left:"center",top:"center"},tooltip:{show:!0,trigger:"item",formatter:"{b}: {c}",confine:!0},legend:{show:!1,bottom:"0"},series:[{name:"Radius Mode",type:"pie",radius:window.innerWidth>1050?[60,80]:[50,65],itemStyle:{borderRadius:5},label:{show:!1},labelLine:{show:!1},data:[{value:l>0?l:"",name:d,itemStyle:{color:new _(0,0,0,1,[{offset:1,color:"#60A5FA"},{offset:0,color:"#60A5FA"}])}},{value:r,name:s,itemStyle:{color:"#DBEAFE"}}]}]};return n&&x.setOption(n),()=>{x.dispose()}},[l,r]),e.jsxs("div",{className:"text-center",style:{width:window.innerWidth>1050?"200px":"150px"},children:[e.jsx("div",{ref:a,style:{minWidth:"100%",height:window.innerWidth>1050?"200px":"150px",width:"0px !important"}}),e.jsx("div",{className:"text-dark fw-semibold fs-6",style:{marginTop:"5px"},children:c(t)})]})}function ie({prevJourney:t}){const l=d=>{if(d){const s=new Date(d),a={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return s.toLocaleDateString("en-US",a)}return""},r=(d,s,a,o)=>{const n=(a+o).toFixed(1)+" hrs";return{distance:`${d.toFixed(0)} km`,tankLevel:`${s} L`,duration:n}};return e.jsx("div",{className:"pb-2",children:t.length>0?t.map((d,s)=>{var f,b,p,g,j,T,C;const a=(f=t[s])==null?void 0:f.startTime,o=(b=t[s])==null?void 0:b.planTitle,x=((p=t[s])==null?void 0:p.journey)||[],n=((g=t[s])==null?void 0:g.distanceCovered)||0,h=((j=t[s])==null?void 0:j.containerSize)||0,w=((T=t[s])==null?void 0:T.drivingTime)||0,v=((C=t[s])==null?void 0:C.idleTime)||0,i=r(n,h,w,v);return e.jsxs("div",{className:"d-flex flex-column ps-3 pe-3 rounded-3 py-3 mt-1 mx-3",style:{marginBottom:"15px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start flex-column mb-2",children:[e.jsxs("div",{className:"fs-5 mb-1",style:{color:"black",display:"flex",alignItems:"center",fontWeight:"bold",letterSpacing:".8px"},children:[e.jsx("div",{className:"fs-6",style:{width:"30px",height:"30px",borderRadius:"50%",border:"2px solid rgb(37, 99, 235)",color:"rgb(37, 99, 235)",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",marginRight:"8px"},children:s+1}),o]}),e.jsxs("div",{className:"fs-6",style:{marginLeft:"40px",fontSize:"12px"},children:[e.jsx(u,{className:" p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",l(a)]})]}),e.jsx("div",{style:{marginBottom:"10px",marginLeft:"40px",fontSize:"14px",letterSpacing:".5px"},children:x.map(($,z)=>e.jsxs("span",{children:[z>0?" -> ":"",$]},z))}),e.jsxs("div",{style:{marginLeft:"40px"},className:"d-flex justify-content-between",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("span",{style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(M,{className:" p-1 rounded-3",style:{fontSize:"22px",color:"#DC2626",backgroundColor:"#FECACA"}})," ",c("Distance")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"#DC2626",fontWeight:"bold"},children:i.distance})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("span",{style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(te,{className:" p-1 rounded-3",style:{fontSize:"22px",color:"#2563EB",backgroundColor:"#DBEAFE"}})," ",c("Tank Level")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"#2563EB",fontWeight:"bold"},children:i.tankLevel})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("span",{style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(u,{className:" p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",c("Duration")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"green",fontWeight:"bold"},children:i.duration})]})]})]},s)}):e.jsx("div",{className:"text-center my-5",children:"No Previous Trip Found"})})}function xe(){const[t,l]=m.useState({distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0,profile:{driverName:"",driverLicenceNo:"",driverContactNo:""},graph1:{totalTankFuel:0,fuelUnloaded:0},graph2:{totalJob:0,jobCompleted:0},prevJourney:[],myTrip:[],alltime:{distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0}}),[r,d]=m.useState(!1),[s,a]=m.useState(!1),[o,x]=m.useState(!0),n=new URLSearchParams(window.location.search),{t:h,i18n:w}=I(),v=async()=>{try{w.changeLanguage(n.get("lang")||"en");let i="";const f=n.get("jwtToken");f&&(i=JSON.parse(atob(f.split(".")[1])));const b=n.get("driverId");if(b){let p=await k.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in//api/v1/dashboard/driver/metrics/${b}`);const{data:g}=p;l(g)}else if(i){const p=i.sub;if(p){let g=await k.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in//api/v1/dashboard/driver/metrics/${p}`);const{data:j}=g;l(j)}}}catch(i){console.log(i),d(!1)}};return m.useEffect(()=>{v();const i=setInterval(v,3e5);return()=>clearInterval(i)},[]),e.jsxs("div",{className:"d-flex align-items-start justify-content-between",children:[e.jsxs("div",{className:" mx-0 align-items-start ",style:{width:window.innerWidth>950?"60%":"100%",overflowY:"scroll",height:"99vh"},children:[e.jsxs("div",{className:"fs-4 mt-3 fw-bolder px-xl-5 px-lg-4 px-md-3 px-2",style:{color:"#15283b"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[t.profile.driverName,e.jsx("div",{className:"px-2 py-1 rounded-2 fs-6 mx-2",style:{backgroundColor:"rgb(37, 99, 235,0.1)",color:"rgb(37, 99, 235)",letterSpacing:"1px"},children:"Driver"})]}),e.jsx("a",{href:`tel:${t.profile.driverContactNo}`,style:{cursor:"pointer"},children:e.jsx(ee,{className:"fs-3",style:{color:"rgb(37, 99, 235)",cursor:"pointer"}})})]}),e.jsx("hr",{style:{borderColor:"rgb(37, 99, 235)",borderWidth:"2px",marginBottom:"5px",marginTop:"10px"}})]}),e.jsx(se,{distanceCovered:t.alltime.distanceCovered,drivingTime:t.alltime.drivingTime,idleTime:t.alltime.idleTime,averageSpeed:t.alltime.averageSpeed}),e.jsx("div",{style:{display:window.innerWidth<=950?"block":"none"},children:e.jsxs("div",{className:"p-2 py-3  rounded-3",style:{boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white",position:"relative",marginTop:"5px"},children:[e.jsxs("div",{className:"fs-2 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(F,{className:"display-6",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),h("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(N,{title:"Tanker Fuel Level",filllevel:t.graph1.totalTankFuel-t.graph1.fuelUnloaded,emptylevel:t.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(N,{title:"Jobs Completed",emptylevel:t.graph2.totalJob-t.graph2.jobCompleted,filllevel:t.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]})]})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>a(!s),className:`accordion-button ${s?"collapsed":""} fs-4`,type:"button",style:{color:s?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:h("Ongoing Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${s?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(le,{currentTrip:t.myTrip})})})})]})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>x(!o),className:`accordion-button ${o?"collapsed":""} fs-4`,type:"button",style:{color:o?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:h("Previous Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${o?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(ie,{prevJourney:t.prevJourney})})})})]})})]}),e.jsx("div",{style:{width:"40%",height:"99vh",display:window.innerWidth>950?"block":"none"},children:e.jsxs("div",{className:"p-2 py-3  rounded-3",style:{boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white",position:"relative",marginTop:"5px"},children:[e.jsxs("div",{className:"fs-2 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(F,{className:"display-6",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),h("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(N,{title:"Tanker Fuel Level",filllevel:t.graph1.totalTankFuel-t.graph1.fuelUnloaded,emptylevel:t.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(N,{title:"Jobs Completed",emptylevel:t.graph2.totalJob-t.graph2.jobCompleted,filllevel:t.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]})]})})]})}export{xe as default};
