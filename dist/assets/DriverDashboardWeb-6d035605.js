import{j as e,t as T,r as p,f as pe,g as me,e as he,u as ge}from"./vendor-f48e548e.js";import{F as A,_ as se,b as _,g as xe,c as fe,s as ue,u as be,d as ve,e as ye,a as je}from"./assertThisInitialized-02748e78.js";import{F as z,G as ie,I as ae,a as $,b as we,c as Ne,d as Se,e as U,B}from"./index.esm-dcd22834.js";import{M as re,a as Ce,b as Te,c as ke,B as M,R as Ie}from"./ResponsiveTable-07c5d293.js";import{T as Le,a as De,t as ze,b as G,c as H,d as J,e as K,f as q,g as Z,h as R}from"./TimelineSeparator-48dd3db1.js";import{u as Pe,i as Ee,L as Ae,a as Oe,b as Me,c as Re,d as We,e as Fe,f as _e}from"./installSVGRenderer-7788c1a1.js";import"./index-41ce01ef.js";import"./react-toastify.esm-81104cc6.js";import"./ButtonBase-a89ef7b4.js";import"./extendSxProp-246317be.js";import"./Select-7d29be83.js";import"./createSvgIcon-a28dcbb5.js";import"./useTheme-6bee9f51.js";import"./InputLabel-6317524e.js";function $e(t){return e.jsx("div",{className:"d-flex align-items-center justify-content-center my-1 flex-wrap",children:e.jsxs("div",{className:"row my-1 d-flex justify-content-center align-items-stretch",style:{width:"100%"},children:[e.jsxs("div",{className:"col-5 col-md-2 px-2 rounded-3 py-3 mt-1 mx-2 mb-2",style:{minWidth:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"rgb(22 101 52 / 11%)",borderRadius:"10px",display:"inline-block"},children:e.jsx(A,{className:"",style:{fontSize:"22px",color:"rgb(22 101 52)"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[z(t.drivingTime)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"hrs"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:T("Driving Time")})]}),e.jsxs("div",{className:"col-5 col-md-2 px-2 rounded-3 py-3 mt-1 mx-2 mb-2",style:{minWidth:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"#FECACA",borderRadius:"10px",display:"inline-block"},children:e.jsx(re,{className:"",style:{fontSize:"22px",color:"#DC2626"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[z(t.distanceCovered)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"km"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:T("Distance")})]}),e.jsxs("div",{className:"col-5 col-md-2 px-2 rounded-3 py-3 mt-1 mx-2 mb-2",style:{minWidth:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"rgb(22 101 52 / 11%)",borderRadius:"10px",display:"inline-block"},children:e.jsx(ie,{className:"",style:{fontSize:"22px",color:"rgb(22 101 52)"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[z(t.idleTime)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"hrs"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:T("Idle Time")})]}),e.jsxs("div",{className:"col-5 col-md-2 px-2 rounded-3 py-3 mt-1 mx-2 mb-2",style:{minWidth:"120px",fontSize:"12px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white"},children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"p-2",style:{backgroundColor:"#DBEAFE",borderRadius:"10px",display:"inline-block"},children:e.jsx(ae,{className:"",style:{fontSize:"22px",color:"#2563EB"}})})}),e.jsxs("div",{className:"fs-5 mt-2 fw-bold px-1 text-center",style:{color:"#15283b"},children:[z(t.averageSpeed)," ",e.jsx("span",{className:"",style:{fontSize:"14px"},children:"km/hr"})]}),e.jsx("div",{className:"text-center",style:{color:"#918f97",fontSize:"14px"},children:T("Avg. Speed")})]})]})})}const oe=p.createContext(null);function Ue(){const[t,s]=p.useState(null);return p.useEffect(()=>{s(`mui-p-${Math.round(Math.random()*1e5)}`)},[]),t}function Q(t){const{children:s,value:i}=t,a=Ue(),c=p.useMemo(()=>({idPrefix:a,value:i}),[a,i]);return e.jsx(oe.Provider,{value:c,children:s})}function ne(){return p.useContext(oe)}function le(t,s){const{idPrefix:i}=t;return i===null?null:`${t.idPrefix}-P-${s}`}function de(t,s){const{idPrefix:i}=t;return i===null?null:`${t.idPrefix}-T-${s}`}const Be=["children"],Ge=p.forwardRef(function(s,i){const{children:a}=s,c=se(s,Be),l=ne();if(l===null)throw new TypeError("No TabContext provided");const d=p.Children.map(a,o=>p.isValidElement(o)?p.cloneElement(o,{"aria-controls":le(l,o.props.value),id:de(l,o.props.value)}):null);return e.jsx(Le,_({},c,{ref:i,value:l.value,children:d}))}),V=Ge;function He(t){return xe("MuiTabPanel",t)}fe("MuiTabPanel",["root"]);const Je=["children","className","value"],Ke=t=>{const{classes:s}=t;return ye({root:["root"]},He,s)},qe=ue("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>({padding:t.spacing(3)})),Ze=p.forwardRef(function(s,i){const a=be({props:s,name:"MuiTabPanel"}),{children:c,className:l,value:d}=a,o=se(a,Je),h=_({},a),f=Ke(h),g=ne();if(g===null)throw new TypeError("No TabContext provided");const u=le(g,d),N=de(g,d);return e.jsx(qe,_({"aria-labelledby":N,className:ve(f.root,l),hidden:d!==g.value,id:u,ref:i,role:"tabpanel",ownerState:h},o,{children:d===g.value&&c}))}),W=Ze;function ce(t){return e.jsx(e.Fragment,{children:t.currentTrip.length>0?e.jsx(De,{position:"right",className:"d-flex align-items-stretch px-0 px-sm-2",sx:{[`& .${ze.root}`]:{flex:window.innerWidth<500?0:.1}},children:t.currentTrip&&t.currentTrip.map((s,i)=>s.Status==="Delivered"?e.jsxs(G,{children:[e.jsx(H,{color:"#918f97",children:e.jsx("div",{className:"fw-bolder",style:{fontSize:window.innerWidth<500?"18px":"24px",paddingTop:window.innerWidth<500?"7px":"2px",color:"rgb(22 101 52)"},children:"Delivered"})}),e.jsxs(J,{children:[e.jsx(K,{style:{borderWidth:"2px",backgroundColor:"rgb(22 101 52 / 11%)"},children:e.jsx(Ce,{className:"fs-5",style:{color:"rgb(22 101 52)"}})}),e.jsx(q,{style:{borderStyle:"dashed",backgroundColor:"transparent",borderWidth:"2.5px"}})]}),e.jsx(Z,{children:e.jsxs("div",{style:{borderTop:"2px solid #918f9750",paddingTop:"12px",marginTop:"20px",paddingLeft:"5px",borderBottom:"2px solid #918f9750",paddingBottom:"12px"},children:[e.jsxs("div",{className:"fw-bolder",style:{color:"#15283b",fontSize:"20px"},children:[i+1,".  ",s.officeName]}),e.jsx("div",{className:"",style:{color:"#918f97",fontSize:"14px"},children:s.officeAddress}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(A,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",s.DeliveredTime]}),e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx($,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"#4338CA",backgroundColor:"#E0E7FF"}})," Delivered Qty: ",e.jsxs("span",{style:{color:"#4338CA",fontWeight:600,marginLeft:"5px",textWrap:"nowrap"},children:[" ",s.Quantity]})]})]})]})})]},i):e.jsxs(G,{children:[e.jsx(H,{color:"#918f97",children:e.jsx("div",{className:"fw-bolder",style:{color:"#CA8A04",fontSize:window.innerWidth<500?"18px":"22px",paddingTop:window.innerWidth<500?"7px":"2px",width:window.innerWidth<500?"85px":"112px"},children:"Pending"})}),e.jsxs(J,{children:[e.jsx(K,{style:{borderWidth:"9px",backgroundColor:"#FEF3C7"}}),e.jsx(q,{style:{borderStyle:"dashed",backgroundColor:"transparent",borderWidth:"2.5px"}})]}),e.jsx(Z,{children:e.jsxs("div",{style:{borderTop:"2px solid #918f9750",paddingTop:"12px",marginTop:"20px",paddingLeft:"5px",borderBottom:"2px solid #918f9750",paddingBottom:"12px"},children:[e.jsx("div",{className:"fw-bolder",style:{color:"#15283b",fontSize:"20px"},children:s.officeName}),e.jsx("div",{className:"",style:{color:"#918f97"},children:"Address"}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap",children:[e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx(A,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)",textWrap:"nowrap"}})," _ _ _ _"]}),e.jsxs("div",{className:"mt-1 d-flex align-items-center",style:{color:"#15283b",fontSize:"14px"},children:[e.jsx($,{className:"me-2 ms-1 p-1 rounded-3",style:{fontSize:"22px",color:"#4338CA",backgroundColor:"#E0E7FF"}})," Delivered Qty: ",e.jsx("span",{style:{color:"#4338CA",fontWeight:600,marginLeft:"5px",textWrap:"nowrap"},children:" 0 L"})]})]})]})})]},i))}):e.jsx("div",{className:"text-center fs-5 py-3",children:"No Trips Found"})})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Qe(t,s,i,a){function c(l){return l instanceof i?l:new i(function(d){d(l)})}return new(i||(i=Promise))(function(l,d){function o(g){try{f(a.next(g))}catch(u){d(u)}}function h(g){try{f(a.throw(g))}catch(u){d(u)}}function f(g){g.done?l(g.value):c(g.value).then(o,h)}f((a=a.apply(t,s||[])).next())})}var Ve=function t(s,i){if(s===i)return!0;if(s&&i&&typeof s=="object"&&typeof i=="object"){if(s.constructor!==i.constructor)return!1;var a,c,l;if(Array.isArray(s)){if(a=s.length,a!=i.length)return!1;for(c=a;c--!==0;)if(!t(s[c],i[c]))return!1;return!0}if(s.constructor===RegExp)return s.source===i.source&&s.flags===i.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===i.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===i.toString();if(l=Object.keys(s),a=l.length,a!==Object.keys(i).length)return!1;for(c=a;c--!==0;)if(!Object.prototype.hasOwnProperty.call(i,l[c]))return!1;for(c=a;c--!==0;){var d=l[c];if(!t(s[d],i[d]))return!1}return!0}return s!==s&&i!==i};const X="__googleMapsScriptId";var E;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(E||(E={}));class P{constructor({apiKey:s,authReferrerPolicy:i,channel:a,client:c,id:l=X,language:d,libraries:o=[],mapIds:h,nonce:f,region:g,retries:u=3,url:N="https://maps.googleapis.com/maps/api/js",version:I}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=s,this.authReferrerPolicy=i,this.channel=a,this.client=c,this.id=l||X,this.language=d,this.libraries=o,this.mapIds=h,this.nonce=f,this.region=g,this.retries=u,this.url=N,this.version=I,P.instance){if(!Ve(this.options,P.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(P.instance.options)}`);return P.instance}P.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?E.FAILURE:this.done?E.SUCCESS:this.loading?E.LOADING:E.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let s=this.url;return s+="?callback=__googleMapsCallback",this.apiKey&&(s+=`&key=${this.apiKey}`),this.channel&&(s+=`&channel=${this.channel}`),this.client&&(s+=`&client=${this.client}`),this.libraries.length>0&&(s+=`&libraries=${this.libraries.join(",")}`),this.language&&(s+=`&language=${this.language}`),this.region&&(s+=`&region=${this.region}`),this.version&&(s+=`&v=${this.version}`),this.mapIds&&(s+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(s+=`&auth_referrer_policy=${this.authReferrerPolicy}`),s}deleteScript(){const s=document.getElementById(this.id);s&&s.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((s,i)=>{this.loadCallback(a=>{a?i(a.error):s(window.google)})})}importLibrary(s){return this.execute(),google.maps.importLibrary(s)}loadCallback(s){this.callbacks.push(s),this.execute()}setScript(){var s,i;if(document.getElementById(this.id)){this.callback();return}const a={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(a).forEach(l=>!a[l]&&delete a[l]),!((i=(s=window==null?void 0:window.google)===null||s===void 0?void 0:s.maps)===null||i===void 0)&&i.importLibrary||(l=>{let d,o,h,f="The Google Maps JavaScript API",g="google",u="importLibrary",N="__ib__",I=document,S=window;S=S[g]||(S[g]={});const C=S.maps||(S.maps={}),j=new Set,v=new URLSearchParams,L=()=>d||(d=new Promise((y,w)=>Qe(this,void 0,void 0,function*(){var x;yield o=I.createElement("script"),o.id=this.id,v.set("libraries",[...j]+"");for(h in l)v.set(h.replace(/[A-Z]/g,n=>"_"+n[0].toLowerCase()),l[h]);v.set("callback",g+".maps."+N),o.src=this.url+"?"+v,C[N]=y,o.onerror=()=>d=w(Error(f+" could not load.")),o.nonce=this.nonce||((x=I.querySelector("script[nonce]"))===null||x===void 0?void 0:x.nonce)||"",I.head.append(o)})));C[u]?console.warn(f+" only loads once. Ignoring:",l):C[u]=(y,...w)=>j.add(y)&&L().then(()=>C[u](y,...w))})(a);const c=this.libraries.map(l=>this.importLibrary(l));c.length||c.push(this.importLibrary("core")),Promise.all(c).then(()=>this.callback(),l=>{const d=new ErrorEvent("error",{error:l});this.loadErrorCallback(d)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(s){if(this.errors.push(s),this.errors.length<=this.retries){const i=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${i} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},i)}else this.onerrorEvent=s,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(s=>{s(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setScript())}}}const Xe="/assets/truck (left).png",Y="/assets/truck (right).png",Ye="/assets/green flag.png",et="/assets/blue flag.png";function ee(t){const[s,i]=p.useState(!1),[a,c]=p.useState(null);p.useState(null);const l=p.useRef();p.useEffect(()=>{const h=new AbortController;if(t.deliveryPlanId){const f=new P({apiKey:"AIzaSyDN32TA762x19KhBZX91X4uNcmdGAhAlrQ",version:"weekly"});(async()=>{var g;try{await f.load(),!h.signal.aborted&&((g=window.google)!=null&&g.maps)&&!s&&i(!0),s&&c(new window.google.maps.Map(l.current,{zoom:15}))}catch(u){console.error("Error loading Google Maps:",u)}})()}return()=>h.abort()},[s]);const d=h=>h*(180/Math.PI),o=async h=>{if(t.deliveryPlanId){const g=new google.maps.DirectionsService,u=new google.maps.DirectionsRenderer({map:a,suppressMarkers:!0,polylineOptions:{strokeColor:"#4074f8",strokeOpacity:.8,strokeWeight:6}}),N=new google.maps.DirectionsRenderer({map:a,suppressMarkers:!0,polylineOptions:{strokeColor:"#ff474c",zIndex:5}}),I=new google.maps.DirectionsRenderer({map:a,suppressMarkers:!0,polylineOptions:{strokeColor:"transparent",zIndex:-1}});u.setMap(a),N.setMap(a),I.setMap(a);let S=[],C=[],j=[],v=[],L=[],y=0,w=0;if(h===1)await fetch(`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/driver_route/${t.deliveryPlanId}`).then(x=>x.json()).then(x=>{t.setMapComponentData(x);let n=x.plannedRoute;y=n[0].startLatitude,w=n[0].startLongitude;for(let m=0;m<n.length;m++){const b=n[m].latitude,D=n[m].longitude;S.push({location:new google.maps.LatLng(b,D)}),C.push({location:new google.maps.LatLng(b,D),officeName:n[m].officeName})}let r=x.driverRoute;for(let m=0;m<r.length;m++){const b=r[m].latitude,D=r[m].longitude;j.push({location:new google.maps.LatLng(b,D),stopover:!0}),r[m].deliveryTrackerStatusId===2&&v.push({location:new google.maps.LatLng(b,D),lastUpdatetime:r[m].locationUpdateTime,officeName:r[m].officeName}),r[m].deliveryTrackerStatusId===3&&v.push({location:new google.maps.LatLng(b,D),lastUpdatetime:r[m].locationUpdateTime})}});else{let x=t.mapComponentData.plannedRoute;y=x[0].startLatitude,w=x[0].startLongitude;for(let r=0;r<x.length;r++){const m=x[r].latitude,b=x[r].longitude;S.push({location:new google.maps.LatLng(m,b)}),C.push({location:new google.maps.LatLng(m,b),officeName:x[r].officeName})}let n=t.mapComponentData.driverRoute;for(let r=0;r<n.length;r++){const m=n[r].latitude,b=n[r].longitude;j.push({location:new google.maps.LatLng(m,b),stopover:!0}),n[r].deliveryTrackerStatusId===2&&v.push({location:new google.maps.LatLng(m,b),lastUpdatetime:n[r].locationUpdateTime,officeName:n[r].officeName}),n[r].deliveryTrackerStatusId===3&&v.push({location:new google.maps.LatLng(m,b),lastUpdatetime:n[r].locationUpdateTime})}}g.route({origin:new google.maps.LatLng(y,w),destination:new google.maps.LatLng(y,w),waypoints:S,optimizeWaypoints:!1,travelMode:google.maps.TravelMode.DRIVING}).then(x=>{u.setDirections(x);for(var n=x.routes[0],r=0;r<n.legs.length;r++)r===0?new google.maps.Marker({position:n.legs[r].start_location,label:{text:"SP",color:"white"},optimized:!1,zIndex:99,map:a}):new google.maps.Marker({position:n.legs[r].start_location,label:{text:r.toString(),color:"white"},optimized:!1,zIndex:99,map:a})}),g.route({origin:new google.maps.LatLng(y,w),destination:j[j.length-1].location,waypoints:j,optimizeWaypoints:!1,travelMode:google.maps.TravelMode.DRIVING}).then(x=>{N.setDirections(x);for(var n=x.routes[0],r=0;r<n.legs.length;r++)if(r===n.legs.length-1)if(n.legs.length>1){var m=Math.atan((n.legs[r].start_location.toJSON().lng-n.legs[r-1].start_location.toJSON().lng)/(n.legs[r].start_location.toJSON().lat-n.legs[r-1].start_location.toJSON().lat));d(m)>90||d(m)<0?(print("right"),new google.maps.Marker({position:n.legs[r].start_location,icon:Xe,zIndex:10,map:a})):new google.maps.Marker({position:n.legs[r].start_location,icon:Y,zIndex:10,map:a})}else new google.maps.Marker({position:n.legs[r].start_location,icon:Y,zIndex:10,map:a})});for(var f=0;f<v.length;f++){const x='<div id="content"><div id="siteNotice"></div><h2 id="firstHeading" class="firstHeading fs-3 fw-bold" style="color: green;">Delivered</h2><div id="bodyContent" class="fs-6"><p><b>Pump: </b> '+v[f].officeName+"</p><p><b>Last updated: </b>"+new Date(v[f].lastUpdatetime).toDateString()+"</p></div></div>",n=new google.maps.InfoWindow({content:x,ariaLabel:"Delivered"}),r=new google.maps.Marker({position:v[f].location,icon:{url:Ye,size:new google.maps.Size(30,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,18)},zIndex:100,map:a});r.addListener("click",()=>{n.open({anchor:r,map:a,shouldFocus:!1})})}for(var f=0;f<L.length;f++){const n='<div id="content"><div id="siteNotice"></div><h2 id="firstHeading" class="firstHeading" style="color: blue;">Intimate</h4><div id="bodyContent"><p><b>Last updated: </b>'+new Date(v[f].lastUpdatetime).toDateString()+"</p></div></div>",r=new google.maps.InfoWindow({content:n,ariaLabel:"Intimate"});new google.maps.Marker({position:L[f].location,icon:{url:et,size:new google.maps.Size(30,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,18)},zIndex:100,map:a}),completedMarker.addListener("click",()=>{r.open({anchor:completedMarker,gmapObj:a,shouldFocus:!1})})}}};return p.useEffect(()=>{a&&(t.deliveryPlanId&&t.mapComponentData.length==0?o(1):t.deliveryPlanId&&o(0))},[a]),p.useEffect(()=>{const h=setInterval(o(1),3e5);return()=>{clearInterval(h)}},[]),e.jsx(e.Fragment,{children:t.deliveryPlanId?e.jsx("div",{className:"map",ref:l,style:{height:"100%",borderRadius:"5px"}}):e.jsx("div",{className:"text-center py-3 fs-5",children:"No Ongoing Trip !"})})}Pe([Oe,Me,Re,We,Fe,_e]);function F({title:t,filllevel:s,emptylevel:i,fillTitle:a,emptyTitle:c}){const l=p.useRef();return p.useEffect(()=>{const d=l.current,o=Ee(d,null,{renderer:"svg",width:window.innerWidth>1050?"200px":"150px",height:window.innerWidth>1050?"200px":"150px"}),h={title:{text:`${s+i>0?(s/(s+i)*100).toFixed(0):0}%`,left:"center",top:"center"},tooltip:{show:!0,trigger:"item",formatter:"{b}: {c}",confine:!0},legend:{show:!1,bottom:"0"},series:[{name:"Radius Mode",type:"pie",radius:window.innerWidth>1050?[60,80]:[50,65],itemStyle:{borderRadius:5},label:{show:!1},labelLine:{show:!1},data:[{value:s>0?s:"",name:a,itemStyle:{color:new Ae(0,0,0,1,[{offset:1,color:"#60A5FA"},{offset:0,color:"#60A5FA"}])}},{value:i,name:c,itemStyle:{color:"#DBEAFE"}}]}]};return h&&o.setOption(h),()=>{o.dispose()}},[s,i]),e.jsxs("div",{className:"text-center",style:{width:window.innerWidth>1050?"200px":"150px"},children:[e.jsx("div",{ref:l,style:{minWidth:"100%",height:window.innerWidth>1050?"200px":"150px",width:"0px !important"}}),e.jsx("div",{className:"text-dark fw-semibold fs-6",style:{marginTop:"5px"},children:T(t)})]})}function tt({prevJourney:t}){let s=new Array(t.length).fill(!0);const[i,a]=p.useState(s);p.useEffect(()=>{a(s)},[t]);const c=d=>{if(d){const o=new Date(d),h={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};return o.toLocaleDateString("en-US",h)}return""},l=(d,o,h,f)=>{const u=(h+f).toFixed(1)+" hrs";return{distance:`${d.toFixed(0)} km`,tankLevel:`${o} L`,duration:u}};return e.jsx("div",{className:"pb-2",children:t.length>0?t.map((d,o)=>{var j,v,L,y,w,x,n,r;const h=(j=t[o])==null?void 0:j.startTime,f=(v=t[o])==null?void 0:v.planTitle,g=((L=t[o])==null?void 0:L.journey)||[],u=((y=t[o])==null?void 0:y.distanceCovered)||0,N=((w=t[o])==null?void 0:w.containerSize)||0,I=((x=t[o])==null?void 0:x.drivingTime)||0,S=((n=t[o])==null?void 0:n.idleTime)||0,C=l(u,N,I,S);return e.jsxs("div",{className:"accordion mt-2 mb-3 mx-2 rounded-3",style:{marginBottom:"15px",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",borderColor:"transparent"},children:[e.jsxs("div",{className:"accordion-item rounded-3 d-flex align-items-start",style:{border:0},children:[e.jsx("h2",{className:"accordion-header",id:"headingOne"}),e.jsx("button",{onClick:()=>a(m=>[...m.slice(0,o),!m[o],...m.slice(o+1)]),className:`accordion-button d-flex align-items-baseline ${i[o]?"collapsed":""} fs-4`,type:"button",style:{color:i[o]?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:e.jsxs("div",{className:"d-flex flex-column",style:{width:"inherit"},children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start flex-column mb-2",children:[e.jsxs("div",{className:"fs-5 mb-1",style:{display:"flex",alignItems:"center",fontWeight:"bold",lineBreak:"anywhere",letterSpacing:".8px",lineHeight:1.5},children:[e.jsx("div",{className:"fs-6",style:{minWidth:"40px",minHeight:"40px",borderRadius:"50%",border:"2px solid rgb(37, 99, 235)",color:"rgb(37, 99, 235)",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",marginRight:"8px",lineHeight:".8px"},children:o+1}),f]}),e.jsxs("div",{className:"",style:{marginLeft:"40px",fontSize:"14px",color:"#918f97",lineHeight:.7,fontWeight:100},children:[e.jsx(A,{className:" p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",c(h)]})]}),e.jsx("div",{style:{marginBottom:"12px",marginLeft:"40px",fontSize:"14px",letterSpacing:".5px",color:"#15283b",lineHeight:1.75,fontWeight:200},children:g.map((m,b)=>e.jsxs("span",{children:[b>0?" -> ":"",m]},b))}),e.jsxs("div",{style:{marginLeft:"40px",color:"#15283b"},className:"d-flex justify-content-between",children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",lineHeight:.8,alignItems:"center"},children:[e.jsxs("span",{className:"d-flex align-items-center fw-bold",style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(re,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"#DC2626",backgroundColor:"#FECACA"}})," ",window.innerWidth<500?"":T("Distance")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"#DC2626",fontWeight:"bold",lineHeight:2},children:C.distance})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",lineHeight:.8,alignItems:"center"},children:[e.jsxs("span",{className:"d-flex align-items-center fw-bold",style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(Te,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"#2563EB",backgroundColor:"#DBEAFE"}})," ",window.innerWidth<500?"":T("Tank Level")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"#2563EB",fontWeight:"bold",lineHeight:2},children:C.tankLevel})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",lineHeight:.8,alignItems:"center"},children:[e.jsxs("span",{className:"d-flex align-items-center fw-bold",style:{letterSpacing:".25px",fontSize:"16px"},children:[e.jsx(A,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}})," ",window.innerWidth<500?"":T("Duration")]}),e.jsx("span",{className:"text-center",style:{fontSize:"18px",color:"green",fontWeight:"bold",lineHeight:2},children:C.duration})]})]})]},o)})]}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${i[o]?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-0 py-2",children:e.jsx("div",{className:"",children:e.jsx(ce,{currentTrip:(r=t[o])==null?void 0:r.tripMap})})})})]},o)}):e.jsx("div",{className:"text-center fs-5 py-3",children:"No Previous Trip Found"})})}function te({distanceCovered:t,drivingTime:s,idleTime:i,averageSpeed:a}){return e.jsxs("div",{className:"row gap-2 mx-0 mb-1 mt-2 d-flex align-items-stretch justify-content-center",children:[e.jsxs("div",{className:"px-2 rounded-3 py-2 mt-1 mx-1 ",style:{width:"44%",fontSize:"14px",color:"#15283b",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(A,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}}),T("Driving Time")]}),e.jsxs("div",{className:"fs-2 fw-bold py-1 px-1",children:[z(s)," ",e.jsx("span",{className:"fs-5",children:"hrs"})]})]}),e.jsxs("div",{className:"px-2 rounded-3 py-2 mt-1 mx-1 ",style:{width:"44%",fontSize:"14px",color:"#15283b",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(we,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"#DC2626",backgroundColor:"#FECACA"}}),T("Distance Covered")]}),e.jsxs("div",{className:"fs-2 fw-bold py-1 px-1",children:[z(t)," ",e.jsx("span",{className:"fs-5",children:"km"})]})]}),e.jsxs("div",{className:"px-2 rounded-3 py-2 mt-1 mx-1 ",style:{width:"44%",fontSize:"14px",color:"#15283b",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(ie,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"rgb(22 101 52)",backgroundColor:"rgb(22 101 52 / 11%)"}}),T("Idle Time")]}),e.jsxs("div",{className:"fs-2 fw-bold py-1 px-1",children:[z(i)," ",e.jsx("span",{className:"fs-5",children:"hrs"})]})]}),e.jsxs("div",{className:"px-2 rounded-3 py-2 mt-1 mx-1 ",style:{width:"44%",fontSize:"14px",color:"#15283b",boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px"},children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(ae,{className:"me-1 p-1 rounded-3",style:{fontSize:"22px",color:"#2563EB",backgroundColor:"#DBEAFE"}}),T("Average Speed")]}),e.jsxs("div",{className:"fs-2 fw-bold py-1 px-1",children:[z(a)," ",e.jsx("span",{className:"fs-5",children:"km/hr"})]})]})]})}function ft(){const[t,s]=p.useState({distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0,profile:{driverName:"",driverLicenceNo:"",driverContactNo:""},graph1:{totalTankFuel:0,fuelUnloaded:0},graph2:{totalJob:0,jobCompleted:0},prevJourney:[],myTrip:[],alltime:{distanceCovered:0,drivingTime:0,idleTime:0,averageSpeed:0},currentDeliveredPlanId:0}),[i,a]=p.useState([]),[c,l]=p.useState(!0),[d,o]=p.useState(!1),[h,f]=p.useState(!0),[g,u]=p.useState("1"),[N,I]=p.useState(0),[S,C]=p.useState(!1);p.useState(""),p.useState("");const[j,v]=p.useState([]),L=new URLSearchParams(window.location.search),{t:y,i18n:w}=pe(),{driverId:x}=me(),{state:n}=he(),r=ge(),m=async()=>{try{if(w.changeLanguage(L.get("lang")||"en"),x){let k=await je.get(`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/dashboard/driver/metrics/${x}`);const{data:O}=k;k.data&&l(!1),s(O)}}catch(k){console.log(k),l(!1)}};p.useEffect(()=>{m();const k=setInterval(m,3e5);return()=>clearInterval(k)},[]);const[b,D]=p.useState(window.innerWidth);return p.useEffect(()=>{const k=()=>{D(window.innerWidth)};return window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k)}},[]),S?e.jsx(Ie,{data:i,deliveryPlanId:N}):e.jsxs("div",{className:"d-flex align-items-start justify-content-between",children:[e.jsxs("div",{className:" mx-0 align-items-start ",style:{width:b>950?"60%":"100%",overflowY:"scroll",height:"99vh"},children:[e.jsxs("div",{className:"fs-4 mt-3 fw-bolder px-xl-5 px-lg-4 px-md-3 px-2",style:{color:"#15283b"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between ",children:[e.jsxs("div",{className:"d-flex align-items-center d-flex flex-wrap",children:[n.isback?e.jsx(Ne,{className:"fs-1 me-2",style:{color:"rgb(37, 99, 235)",cursor:"pointer"},onClick:()=>r(-1)}):"",t.profile.driverName,n.status?e.jsx("div",{className:"px-2 py-1 rounded-2 fs-6 mx-1 mt-1 mx-sm-2 ",style:{backgroundColor:"rgb(37, 99, 235,0.1)",color:"rgb(37, 99, 235)",letterSpacing:"1px"},children:n.status}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"spinner-border text-primary ",role:"status",style:{display:c?"block":"none"}})]}),e.jsxs("div",{className:"d-flex align-items-center",children:[!n.isback&&n.statusId<=3?e.jsxs("button",{className:"btn fs-6 rounded-3 mx-2 d-flex align-items-center",onClick:()=>r(`/driverstatistic?token=${n.token}&tableview=true`),style:{backgroundColor:"rgb(37, 99, 235)",color:"white",letterSpacing:"1px"},children:[e.jsx(Se,{className:"me-1 fs-5"}),b>950?"Change Driver":""]}):"",e.jsx("a",{href:`tel:${t.profile.driverContactNo}`,style:{cursor:"pointer"},children:e.jsx(ke,{className:"fs-3",style:{color:"rgb(37, 99, 235)",cursor:"pointer"}})})]})]}),e.jsx("hr",{style:{borderColor:"rgb(37, 99, 235)",borderWidth:"2px",marginBottom:"5px",marginTop:"10px"}})]}),e.jsx($e,{distanceCovered:t.alltime.distanceCovered,drivingTime:t.alltime.drivingTime,idleTime:t.alltime.idleTime,averageSpeed:t.alltime.averageSpeed}),e.jsx("div",{style:{display:b<=950?"block":"none"},children:e.jsx(M,{sx:{width:"100%"},children:e.jsxs(Q,{value:g,children:[e.jsx(M,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(V,{centered:!0,onChange:(k,O)=>u(O),"aria-label":"lab API tabs example",children:[e.jsx(R,{disabled:!!c,className:"fw-bold fs-5",label:"Stats",value:"1"}),e.jsx(R,{disabled:!!c,className:"fw-bold fs-5",label:"Map",value:"2"})]})}),e.jsxs(W,{value:"1",className:"px-0",children:[e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(U,{className:"fs-2",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),y("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(F,{title:"Tanker Fuel Level",filllevel:t.graph1.totalTankFuel-t.graph1.fuelUnloaded,emptylevel:t.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(F,{title:"Jobs Completed",emptylevel:t.graph2.totalJob-t.graph2.jobCompleted,filllevel:t.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]}),e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1 mt-3",style:{color:"#15283b"},children:[e.jsx(B,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),y("Current Metrics")]}),e.jsx(te,{distanceCovered:t.distanceCovered,drivingTime:t.drivingTime,idleTime:t.idleTime,averageSpeed:t.averageSpeed})]}),e.jsx(W,{value:"2",className:"p-0",children:e.jsx("div",{className:"",style:{height:b>950?"88vh":"50vh"},children:e.jsx(ee,{deliveryPlanId:t.currentDeliveredPlanId,mapComponentData:j,setMapComponentData:v})})})]})})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>o(!d),className:`accordion-button ${d?"collapsed":""} fs-4`,type:"button",style:{color:d?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:y("Ongoing Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${d?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(ce,{currentTrip:t.myTrip})})})})]})}),e.jsx("div",{className:"accordion px-xl-5 px-lg-4 px-md-3 px-2 mt-3 mb-3",children:e.jsxs("div",{className:"accordion-item ",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{onClick:()=>f(!h),className:`accordion-button ${h?"collapsed":""} fs-4`,type:"button",style:{color:h?"#15283b":"rgb(37, 99, 235)"},"data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",children:y("Previous Trip")})}),e.jsx("div",{id:"collapseOne",className:`accordion-collapse collapse ${h?"":"show"}`,"aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:e.jsx("div",{className:"accordion-body p-1 py-2",children:e.jsx("div",{className:"",children:e.jsx(tt,{prevJourney:t.prevJourney})})})})]})})]}),e.jsx("div",{style:{width:"40%",display:b>950?"block":"none"},children:e.jsx("div",{className:"p-2 pt-2 mx-1 my-1  rounded-3",style:{boxShadow:"rgba(0, 0, 0, 0.075) 0.1rem 0.1rem 1rem 2px",backgroundColor:"white",position:"relative",marginTop:"0px"},children:e.jsx(M,{sx:{width:"100%"},children:e.jsxs(Q,{value:g,children:[e.jsx(M,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(V,{centered:!0,onChange:(k,O)=>u(O),"aria-label":"lab API tabs example",children:[e.jsx(R,{disabled:!!c,className:"fw-bold fs-5",label:"Stats",value:"1"}),e.jsx(R,{disabled:!!c,className:"fw-bold fs-5",label:"Map",value:"2"})]})}),e.jsxs(W,{value:"1",className:"px-0",children:[e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1",style:{color:"#15283b"},children:[e.jsx(U,{className:"fs-2",style:{marginBottom:"4px",verticalAlign:"bottom",marginRight:"8px",color:"rgb(37, 99, 235)"}}),y("Stats For Ongoing Trip")]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-around",children:[e.jsx(F,{title:"Tanker Fuel Level",filllevel:t.graph1.totalTankFuel-t.graph1.fuelUnloaded,emptylevel:t.graph1.fuelUnloaded,fillTitle:"Fuel Left",emptyTitle:"Fuel Unloaded"}),e.jsx(F,{title:"Jobs Completed",emptylevel:t.graph2.totalJob-t.graph2.jobCompleted,filllevel:t.graph2.jobCompleted,fillTitle:"Job Done",emptyTitle:"Job Left"})]}),e.jsxs("div",{className:"fs-3 fw-bold px-2 mb-1 mt-3",style:{color:"#15283b"},children:[e.jsx(B,{className:"fs-2",style:{marginLeft:"2px",marginBottom:"4px",display:"inline-block",verticalAlign:"bottom",marginRight:"10px",color:"rgb(37, 99, 235)"}}),y("Current Metrics")]}),e.jsx(te,{distanceCovered:t.distanceCovered,drivingTime:t.drivingTime,idleTime:t.idleTime,averageSpeed:t.averageSpeed})]}),e.jsx(W,{value:"2",className:"p-0",children:e.jsx("div",{className:"",style:{height:"88vh"},children:e.jsx(ee,{deliveryPlanId:t.currentDeliveredPlanId,mapComponentData:j,setMapComponentData:v})})})]})})})})]})}export{ft as default};
