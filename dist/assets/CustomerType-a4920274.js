import{_ as Z}from"./index-3600e42e.js";import{r as h,u as lt,j as e}from"./vendor-d1a31163.js";import{r as ee}from"./index-536690ae.js";import{c as dt,P as je,y as Fe,J as _e,K as ct,L as pt,M as ke,N as $e,S as ft,O as ht,U as ut,V as gt,a as T}from"./axios-d9b95618.js";import{k as xt,Q as w}from"./react-toastify.esm-34a8b48c.js";import{l as te,f as Ne,a as De}from"./NotoSansDevanagari-VariableFont_wdth_wght-7a6127ac.js";import{T as mt}from"./ThemeProvider-68b9b4a4.js";import{F as yt,S as bt,M as Ct}from"./Select-006978da.js";import{I as St}from"./InputLabel-0d786470.js";import"./createSvgIcon-a8b447bb.js";import"./react-is.production.min-ec3da07b.js";import"./useTheme-55d19bd2.js";const wt="_chartContainer_vlmyh_1",vt="_lightMode_vlmyh_47",jt="_dateFilter_vlmyh_51",Ft="_officefilter_vlmyh_207",_t="_topContainer_vlmyh_299",kt="_darkMode_vlmyh_319",$t="_iconsContainer_vlmyh_487",Nt="_icon_vlmyh_487",Dt="_exportOptions_vlmyh_571",Tt="_exportOption_vlmyh_571",Bt="_tableContainer_vlmyh_825",Pt="_table_vlmyh_825",It="_summaryHeader_vlmyh_861",Lt="_periodHeader_vlmyh_869",Ot="_closeButton_vlmyh_901",zt="_tableWrapper_vlmyh_931",Vt="_loadingOverlay_vlmyh_939",Rt="_NoDataOverlay_vlmyh_963",At="_loadingSpinner_vlmyh_991",Et="_boldOption_vlmyh_1003",Ht="_optionGroup_vlmyh_1013",Mt="_CustomerProfilingTable_vlmyh_1041",d={chartContainer:wt,lightMode:vt,"label-text":"_label-text_vlmyh_47",dateFilter:jt,officefilter:Ft,topContainer:_t,darkMode:kt,"theme-container":"_theme-container_vlmyh_329",iconsContainer:$t,icon:Nt,exportOptions:Dt,exportOption:Tt,tableContainer:Bt,table:Pt,summaryHeader:It,periodHeader:Lt,closeButton:Ot,tableWrapper:zt,loadingOverlay:Vt,NoDataOverlay:Rt,loadingSpinner:At,boldOption:Et,optionGroup:Ht,CustomerProfilingTable:Mt},so=({ReactECharts:Te,echarts:Be,newExData:B,themeMode:u,selectedRange:S,officeName:k,selectedOffice:Pe,isAdmin:Ie})=>{const[$,H]=h.useState(0),[oe,Wt]=h.useState(10),[v,Le]=h.useState({key:"",direction:""}),[M,Oe]=h.useState(""),[W,ze]=h.useState("Big Buyers");h.useState(!1),h.useState(!1);const he=h.useRef(null),[q,se]=h.useState(!1),ue=h.useRef(null),[X,ge]=h.useState([]);h.useState(!1);const[O,Ve]=h.useState([]),[Re,xe]=h.useState(!1),[J,ae]=h.useState(!1),[Ae,me]=h.useState(!1),[Ee,ne]=h.useState(""),[He,Me]=h.useState(!1),{t:n}=lt(),re=h.useMemo(()=>!W||!B||!B.graph3||!B.graph3[W]?[]:B.graph3[W],[W,B]),G=h.useMemo(()=>v.key?[...re].sort((t,o)=>v.direction==="asc"?t[v.key]>o[v.key]?1:-1:t[v.key]<o[v.key]?1:-1):re,[re,v]),K=Math.ceil(G.length/oe),ie=$*oe,ye=Math.min(ie+oe,G.length),le=(t,o)=>o?t.filter(a=>Object.values(a).some(f=>String(f).toLowerCase().includes(o.toLowerCase()))):t,_=h.useMemo(()=>le(G,M).slice(ie,ye),[G,M,ie,ye]),be=["Name","MobileNo","VehicleNo","Last Visit","Total Visits","Sales"],Ce=h.useMemo(()=>{if(_.length===0)return[];const t=_[0],o=be.filter(a=>t.hasOwnProperty(a)).map(a=>{const f=be.find(s=>s===a);let r=s=>s;return(f==="Name"||f==="VehicleNo")&&(r=s=>Array.isArray(s)?s.join(", "):s),f==="Last Visit"&&(r=s=>s===0?"Today":`${s} days ago`),{Header:n(f),accessor:f,Cell:({value:s})=>r(s)}});return o.unshift({Header:"#",accessor:(a,f)=>f+1}),o},[_]),{getTableProps:We,getTableBodyProps:qe,headerGroups:Ge,prepareRow:Ue,page:Ye}=ee.useTable({columns:Ce,data:_},ee.useFilters,ee.useSortBy,ee.usePagination),Xe=t=>{const o=v.key===t&&v.direction==="asc"?"desc":"asc";Le({key:t,direction:o})},Je=dt({typography:{button:{textTransform:"none"}}}),de=window.innerWidth<=768,Ke=le(_,M);le(G,M);const Qe=t=>{X.includes(t.accessor)?ge(X.filter(o=>o!==t.accessor)):ge([...X,t.accessor])},Se=()=>{se(!q)},Q=t=>{let o="";const a=new Uint8Array(t),f=a.byteLength;for(let r=0;r<f;r++)o+=String.fromCharCode(a[r]);return window.btoa(o)},we=t=>{if(!t)return"";const o=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),f=String(t.getDate()).padStart(2,"0");return`${o}-${a}-${f}`},N=t=>{if(!t)return"";const o=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0");return`${String(t.getDate()).padStart(2,"0")}-${a}-${o}`},ve=async(t,o,a)=>{const f=we(S[0]),r=we(S[1]);try{const s=`https://dev-def-dash-route-api.inspirigenceworks.co.in/api/v1/dashboard/sales_customer/${f}/${r}/${Pe}/${Ie}`,p={};t?(p.MobileNo=t,ne(t)):(p.MobileNo=null,o[0]!=="XXX"?(p.VehicleNo=o[0],ne(o[0])):(p.VehicleNo=null,a?(p.CustomerName=a[0],ne(a[0])):p.CustomerName=null));const C=(await T.post(s,p)).data.map(y=>({...y,totalCount:y.totalCount===0?"":y.totalCount.toString()}));Ve(C),xe(!0),me(!0),ae(!1)}catch(s){console.error("Error fetching sales data:",s)}},Ze=()=>{me(!1),xe(!1)},et=async()=>{const t=w.loading("Please wait..."),o=N(S[0]),a=N(S[1]),f=await Z(()=>import("./exceljs.min-254463f3.js").then(p=>p.e),["assets/exceljs.min-254463f3.js","assets/vendor-d1a31163.js"]),r=new f.Workbook,s=r.addWorksheet("Data");fetch(te).then(p=>p.blob()).then(async p=>{const m=new FileReader;m.onload=async function(){const P=m.result,C=r.addImage({base64:P,extension:"png"});s.addImage(C,{tl:{col:0,row:0},ext:{width:100,height:60}});const y=s.getCell("A1");y.value=`${n("Customers Summary Data")} (${k})`,y.font={bold:!0,color:{argb:"000000"},size:14},y.alignment={vertical:"middle",horizontal:"center"},s.mergeCells("A1:G1");const i=s.getCell("A2");i.value=`${n("Period")}: ${o} ${n("to")} ${a}`,i.font={bold:!0,color:{argb:"000000"},size:12},i.alignment={horizontal:"center"},s.mergeCells("A2:G2"),s.getColumn(1).width=15,s.getColumn(2).width=100,s.getColumn(3).width=20,s.getColumn(4).width=105,s.getColumn(5).width=20,s.getColumn(6).width=20,s.getColumn(7).width=20;const z=["#","Name","MobileNo","VehicleNo","Last Visit","Frequency","Sales"],V=s.addRow(z);V.font={bold:!0,color:{argb:"000000"},size:12},console.log(_);let j=0,F=0,D=0;_.forEach(c=>{D+=c["Last Visit"],j+=c.Frequency,F+=c.Sales}),_.forEach((c,g)=>{const b=[g+1,c.Name.join(", "),c.MobileNo,c.VehicleNo.join(", "),c["Last Visit"]===0?"Today":`${c["Last Visit"]} days ago`,c.Frequency,c.Sales];s.addRow(b).eachCell((L,U)=>{U<=4?L.alignment={horizontal:"left"}:L.alignment={horizontal:"right"}})});const R=s.addRow(["","Total","","",`${D} days ago`,j,`₹ ${F}`]);R.font={bold:!0},R.eachCell((c,g)=>{g<=4?c.alignment={horizontal:"left"}:c.alignment={horizontal:"right"}});const x=`${Date.now()}Customers_Summary_${k}_${o}_${a}.xlsx`;r.xlsx.writeBuffer().then(async c=>{const g=new FormData;g.append("file",new Blob([c]),x);try{const b=await T.post("https://dev-def-dash-route-api.inspirigenceworks.co.in/api/uploader",g,{headers:{"Content-Type":"multipart/form-data"}});if(b.status===200){w.update(t,{render:"Download Starting...",type:"success",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1});const I=b.data.url;window.location.href=`https://dev-def-dash-route-api.inspirigenceworks.co.in/static/downloads/${I}`}else w.update(t,{render:"Download Failed !",type:"error",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1})}catch(b){console.error("Error saving Excel file:",b)}})},m.readAsDataURL(p)})},tt=async()=>{const t=w.loading("Please wait..."),o=N(S[0]),a=N(S[1]),f=await Z(()=>import("./exceljs.min-254463f3.js").then(p=>p.e),["assets/exceljs.min-254463f3.js","assets/vendor-d1a31163.js"]),r=new f.Workbook,s=r.addWorksheet("Data");fetch(te).then(p=>p.blob()).then(async p=>{const m=new FileReader;m.onload=async function(){const P=m.result,C=r.addImage({base64:P,extension:"png"});s.addImage(C,{tl:{col:0,row:0},ext:{width:100,height:60}});const y=s.getCell("A1");y.value=`${n("Customers Summary Data")} (${k})`,y.font={bold:!0,color:{argb:"000000"},size:14},y.alignment={vertical:"middle",horizontal:"center"},s.mergeCells("A1:C1");const i=s.getCell("A2");i.value=`${n("Period")}: ${o} ${n("to")} ${a}`,i.font={bold:!0,color:{argb:"000000"},size:12},i.alignment={horizontal:"center"},s.mergeCells("A2:C2"),s.getColumn(1).width=50,s.getColumn(2).width=15,s.getColumn(3).width=15;const z=["Date","Visit","Sales"],V=s.addRow(z);V.font={bold:!0,color:{argb:"000000"},size:12};let j=0,F=0;O.forEach(x=>{if(x.totalCount>0||x.totalIncome>0){const c=[x.requestedDate,x.totalCount,x.totalIncome],g=s.addRow(c);g.getCell(2).alignment={horizontal:"right"},j+=x.totalIncome,F+=parseInt(x.totalCount)}});const D=s.addRow(["Total",F,`₹ ${j}`]);D.font={bold:!0},D.eachCell((x,c)=>{c===2||c===3?x.alignment={horizontal:"right"}:x.alignment={horizontal:"left"}});const A=`${Date.now()}Customers_Summary_${k}_${o}_${a}.xlsx`;r.xlsx.writeBuffer().then(async x=>{const c=new FormData;c.append("file",new Blob([x]),A);try{const g=await T.post("https://dev-def-dash-route-api.inspirigenceworks.co.in/api/uploader",c,{headers:{"Content-Type":"multipart/form-data"}});if(g.status===200){w.update(t,{render:"Download Starting...",type:"success",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1});const b=g.data.url;window.location.href=`https://dev-def-dash-route-api.inspirigenceworks.co.in/static/downloads/${b}`}else w.update(t,{render:"Download Failed !",type:"error",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1})}catch(g){console.error("Error saving Excel file:",g)}})},m.readAsDataURL(p)})},ot=async()=>{const t=w.loading("Please wait..."),o=N(S[0]),a=N(S[1]),r=new URLSearchParams(window.location.search).get("lang"),s=await T.get(Ne,{responseType:"arraybuffer"}),p=Q(s.data),m=await T.get(De,{responseType:"arraybuffer"}),P=Q(m.data);Z(()=>import("./jspdf.es.min-683271e1.js").then(C=>C.j),["assets/jspdf.es.min-683271e1.js","assets/index-3600e42e.js","assets/vendor-d1a31163.js","assets/index-74b21cfb.css","assets/Dashboard-2367e683.js","assets/axios-d9b95618.js","assets/installSVGRenderer-7788c1a1.js","assets/Skeleton-fd757818.js","assets/Dashboard-5c3f3713.css"]).then(async C=>{let y=C.default;const i=new y;i.addFileToVFS("NotoSansBengali.ttf",p),i.addFont("NotoSansBengali.ttf","NotoSansBengali","normal"),i.setFont("NotoSansBengali"),i.addFileToVFS("NotoSansDevanagari.ttf",P),i.addFont("NotoSansDevanagari.ttf","NotoSansDevanagari","normal"),i.setFont("NotoSansDevanagari");const z=[["#","Name","MobileNo","VehicleNo","Last Visit","Frequency","Sales"]],V={0:{halign:"center"},1:{halign:"center"},2:{halign:"center"},3:{halign:"center"},4:{halign:"center"},5:{halign:"center"},6:{halign:"center"}},j={fontSize:12,fontStyle:"bold",halign:"center"},F={summaryHeader:"#3CB043",secondHeader:"#75AAF0"},D=te,R=35,A=20;i.addImage(D,"PNG",15,12,R,A);const x=[[`${n("Customers Summary Data")} (${k})`]];i.autoTable({head:x,body:[],headStyles:{...j,fillColor:F.summaryHeader,textColor:"#FFFFFF"},margin:{top:30},styles:{font:r==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}});const c=[[`${n("Period")}: ${o} ${n("to")} ${a}`]];i.autoTable({startY:39.5,head:c,body:[],headStyles:{fontSize:12,fontStyle:"bold",halign:"center",fillColor:"#3CB043",textColor:"#FFFFFF"},margin:{top:30},styles:{font:r==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}});let g=_.map((l,E)=>[E+1,l.Name.join(", "),l.MobileNo,l.VehicleNo.join(", "),l["Last Visit"]===0?"Today":`${l["Last Visit"]} days ago`,l.Frequency,l.Sales]),b=0,I=0,L=0;_.map(l=>{L+=l["Last Visit"],b+=l.Frequency,I+=l.Sales});const U=["",n("Total"),"","",`${L} days ago`,b,`₹ ${I}`];g.push(U);const ce={startY:i.autoTable.previous.finalY+1,head:z,body:g,headStyles:{...j,fillColor:F.secondHeader,textColor:"#FFFFFF"},columnStyles:V,styles:{font:r==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}};i.autoTable(ce);const pe=`${Date.now()}Top_Customerss_Summary_by${k}${o}_${a}.pdf`,fe=i.output("blob"),Y=new FormData;Y.append("file",fe,pe);try{const l=await T.post("https://dev-def-dash-route-api.inspirigenceworks.co.in/api/uploader",Y,{headers:{"Content-Type":"multipart/form-data"}});l.status==200?w.update(t,{render:"Download Starting...",type:"success",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1}):w.update(t,{render:"Download Failed !",type:"error",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1});const E=await l.data.url;window.location.href=`https://dev-def-dash-route-api.inspirigenceworks.co.in/static/downloads/${E}`}catch(l){console.error("Error saving PDF file:",l)}})},st=async()=>{const t=w.loading("Please wait..."),o=N(S[0]),a=N(S[1]),r=new URLSearchParams(window.location.search).get("lang"),s=await T.get(Ne,{responseType:"arraybuffer"}),p=Q(s.data),m=await T.get(De,{responseType:"arraybuffer"}),P=Q(m.data);Z(()=>import("./jspdf.es.min-683271e1.js").then(C=>C.j),["assets/jspdf.es.min-683271e1.js","assets/index-3600e42e.js","assets/vendor-d1a31163.js","assets/index-74b21cfb.css","assets/Dashboard-2367e683.js","assets/axios-d9b95618.js","assets/installSVGRenderer-7788c1a1.js","assets/Skeleton-fd757818.js","assets/Dashboard-5c3f3713.css"]).then(async C=>{let y=C.default;const i=new y;i.addFileToVFS("NotoSansBengali.ttf",p),i.addFont("NotoSansBengali.ttf","NotoSansBengali","normal"),i.setFont("NotoSansBengali"),i.addFileToVFS("NotoSansDevanagari.ttf",P),i.addFont("NotoSansDevanagari.ttf","NotoSansDevanagari","normal"),i.setFont("NotoSansDevanagari");const z=[["Date","Visit","Sales"]],V={0:{halign:"center"},1:{halign:"center"},2:{halign:"center"}},j={fontSize:12,fontStyle:"bold",halign:"center"},F={summaryHeader:"#3CB043",secondHeader:"#75AAF0"},D=te,R=35,A=20;i.addImage(D,"PNG",15,12,R,A);const x=[[`${n("Customers Summary Data")} (${k})`]];i.autoTable({head:x,body:[],headStyles:{...j,fillColor:F.summaryHeader,textColor:"#FFFFFF"},margin:{top:30},styles:{font:r==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}});const c=[[`${n("Period")}: ${o} ${n("to")} ${a}`]];i.autoTable({startY:39.5,head:c,body:[],headStyles:{fontSize:12,fontStyle:"bold",halign:"center",fillColor:"#3CB043",textColor:"#FFFFFF"},margin:{top:30},styles:{font:r==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}});const g=O.filter(l=>l.totalCount>0||l.totalIncome>0);let b=g.map((l,E)=>[l.requestedDate,l.totalCount,l.totalIncome]),I=0,L=0;g.forEach(l=>{I+=l.totalIncome,L+=parseInt(l.totalCount)});const U=["Total",L,`₹ ${I}`];b.push(U);const ce={startY:i.autoTable.previous.finalY+1,head:z,body:b,headStyles:{...j,fillColor:F.secondHeader,textColor:"#FFFFFF"},columnStyles:V,styles:{font:r==="hi"?"NotoSansDevanagari":"NotoSansBengali",fontStyle:"bold"}};i.autoTable(ce);const pe=`${Date.now()}Top_Customerss_Summary_by${k}${o}_${a}.pdf`,fe=i.output("blob"),Y=new FormData;Y.append("file",fe,pe);try{const l=await T.post("https://dev-def-dash-route-api.inspirigenceworks.co.in/api/uploader",Y,{headers:{"Content-Type":"multipart/form-data"}});l.status==200?w.update(t,{render:"Download Starting...",type:"success",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1}):w.update(t,{render:"Download Failed !",type:"error",isLoading:!1,autoClose:5e3,closeOnClick:!0,pauseOnFocusLoss:!1});const E=await l.data.url;window.location.href=`https://dev-def-dash-route-api.inspirigenceworks.co.in/static/downloads/${E}`}catch(l){console.error("Error saving PDF file:",l)}})},at={title:{textStyle:{color:u==="dark"?"#ffffff":"#000000",fontSize:window.innerWidth<=768?18:25}},tooltip:{trigger:"axis",textStyle:{fontSize:window.innerWidth<=768?10:14}},legend:{show:!0,data:[n("Visit")],selected:{Visit:!0},bottom:0,textStyle:{color:u==="dark"?"#ffffff":"#000000",fontSize:window.innerWidth<=768?10:12}},grid:{left:window.innerWidth<=768?"12%":"5%",top:"15%",right:window.innerWidth<=768?"12%":"5%"},xAxis:[{type:"time",axisPointer:{label:{formatter:function(t){let o=new Date(t.value);return N(o)}}},axisLine:{lineStyle:{color:u==="dark"?"#ffffff":"#000000"}},axisLabel:{rotate:window.innerWidth<768?45:0,hideOverlap:!0,formatter:"{d} {MMM}",color:u==="dark"?"#ffffff":"#000000"}}],yAxis:[{type:"value",name:n("Visit"),min:0,minInterval:1,axisLine:{lineStyle:{color:u==="dark"?"#ffffff":"#000000"}},axisLabel:{color:u==="dark"?"#ffffff":"#000000"}},{type:"value",name:n("Sales"),axisLine:{lineStyle:{color:u==="dark"?"#ffffff":"#000000"}},axisLabel:{color:u==="dark"?"#ffffff":"#000000",formatter:t=>t>=1e4?t/1e3+"k":t},splitLine:{show:!0,lineStyle:{color:u==="dark"?"grey":"silver",type:"dashed"}}}],dataZoom:[{show:!0,type:"inside",filterMode:"none",xAxisIndex:[0],startValue:new Date(S[0]),endValue:new Date(S[1])}],series:[{name:n("Visit"),type:"scatter",symbolSize:20,data:O.map(t=>[t.requestedDate,t.totalCount]),itemStyle:{color:new Be.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#a6ffcb"},{offset:1,color:"#1fa2ff"}])},yAxisIndex:0,smooth:!0},{name:n("Sales"),type:"bar",barWidth:"40%",data:O.map(t=>[t.requestedDate,parseFloat(t.totalIncome).toFixed(2)]),itemStyle:{borderRadius:[5,5,5,5]},yAxisIndex:1}]},nt=(t,o)=>window.innerWidth>500||t.length<=o?t:t.substring(0,o)+"...",rt=()=>{Me(t=>!t)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`${d.chartContainer} ${u==="dark"?d.darkMode:d.lightMode}`,children:[e.jsx(xt,{position:"top-center",theme:u}),Re?e.jsxs("div",{style:{width:"100%"},children:[e.jsxs("div",{className:"d-flex w-100 g-0 align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[Ae?e.jsx("div",{title:"Previous",className:d.resetButtonContainer,children:e.jsx("button",{title:"Previous",className:`btn btn-primary mx-1 ${window.innerWidth<500?"btn-sm":""} shadow border-2 border-white`,onClick:Ze,children:e.jsx(je,{style:{fontSize:"1rem"}})})}):null,e.jsx("div",{className:`fw-bold ms-2 fs-${window.innerWidth<=768?7:5} ${u==="dark"?d.darkMode:d.lightMode}`,children:Ee})]}),e.jsx("div",{title:"Export Options",className:"d-flex g-0",ref:he,children:e.jsxs("div",{className:`${d.iconsContainer} d-flex justify-content-center align-items-center`,children:[e.jsx("div",{className:`${d.icon} ${u==="dark"?d.darkMode:d.lightMode} px-2 py-1`,onClick:Se,children:q?e.jsx(Fe,{style:{fontSize:"1.1rem"}}):e.jsx(_e,{style:{fontSize:"1.1rem",color:"white"}})}),q&&e.jsxs("div",{className:`${d.exportOptions} ${u==="dark"?d.darkMode:d.lightMode}`,ref:ue,children:[J?e.jsxs("div",{className:d.exportOption,onClick:()=>{ae(!J),se(!1)},children:[e.jsx(pt,{style:{fontSize:"1.1rem",color:"#6c3fb5"}}),e.jsx("span",{children:n("View Graph")})]}):e.jsxs("div",{className:d.exportOption,onClick:()=>{ae(!J),se(!1)},children:[e.jsx(ct,{style:{fontSize:"1.1rem",color:"#0d6efd"}}),e.jsx("span",{children:n("View Table")})]}),e.jsxs("div",{className:d.exportOption,onClick:tt,children:[e.jsx(ke,{style:{fontSize:"1.1rem",color:"green"}}),e.jsx("span",{children:n("Export to Excel")})]}),e.jsxs("div",{className:d.exportOption,onClick:st,children:[e.jsx($e,{style:{fontSize:"1.1rem",color:"red"}}),e.jsx("span",{children:n("Export to PDF")})]})]})]})})]}),J?e.jsx("div",{className:"container-fluid mt-2 table-responsive",style:{height:"334px"},children:e.jsxs("table",{className:`table  ${u=="dark"?"table-dark":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:n("Date")}),e.jsx("th",{scope:"col",children:n("Visit")}),e.jsxs("th",{scope:"col",children:[n("Sales"),"(₹)"]})]})}),e.jsxs("tbody",{children:[O.map(t=>t.totalCount>0&&t.totalIncome>0&&e.jsxs("tr",{children:[e.jsx("td",{children:t.requestedDate}),e.jsx("td",{children:parseInt(t.totalCount)}),e.jsx("td",{children:`₹ ${t.totalIncome}`})]},t.id)),e.jsxs("tr",{children:[e.jsx("td",{children:"Total"}),e.jsx("td",{children:O.filter(t=>t.totalCount>0).reduce((t,o)=>t+parseInt(o.totalCount),0)}),e.jsx("td",{children:`₹ ${O.filter(t=>t.totalIncome>0).reduce((t,o)=>t+o.totalIncome,0)}`})]})]})]})}):e.jsx(Te,{option:at})]}):e.jsxs("div",{style:{fontFamily:"Arial, sans-serif",width:"100%",height:"100%"},children:[e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"d-flex w-100 g-0 align-items-center justify-content-between my-2",children:[e.jsx("div",{children:e.jsxs("div",{className:`fw-bold d-inline me-2 noselect fs-${window.innerWidth<=768?7:5} ${u==="dark"?d.darkMode:d.lightMode}`,children:[n("Customer Profiling")," ",n("of")," ",nt(k,10)]})}),e.jsx("div",{title:"Export Options",className:"d-flex g-0",ref:he,children:e.jsxs("div",{className:`${d.iconsContainer} d-flex justify-content-center align-items-center`,children:[e.jsx("div",{className:`${d.icon} ${u==="dark"?d.darkMode:d.lightMode} px-2 py-1`,onClick:Se,children:q?e.jsx(Fe,{style:{fontSize:"1.1rem"}}):e.jsx(_e,{style:{fontSize:"1.1rem"}})}),q&&e.jsxs("div",{className:`${d.exportOptions} ${u==="dark"?d.darkMode:d.lightMode}`,ref:ue,children:[e.jsxs("div",{className:d.exportOption,onClick:et,children:[e.jsx(ke,{style:{fontSize:"1.1rem",color:"green"}}),e.jsx("span",{children:n("Export to Excel")})]}),e.jsxs("div",{className:d.exportOption,onClick:ot,children:[e.jsx($e,{style:{fontSize:"1.1rem",color:"red"}}),e.jsx("span",{children:n("Export to PDF")})]})]})]})})]})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px",marginTop:"10px"},children:[e.jsx(mt,{theme:Je,children:e.jsxs(yt,{sx:{minWidth:250,mazWidth:280,marginRight:"5px"},size:"small",children:[e.jsx(St,{id:"demo-simple-select-helper-label",style:{color:"var(--text-color)",fontFamily:'"Public Sans", sans-serif !important'},children:n("Filter")}),e.jsx(bt,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",displayEmpty:!0,value:B.graph3?W:"",onChange:t=>ze(t.target.value),style:{color:"var(--text-color)",fontFamily:'"Public Sans", sans-serif !important'},label:n("Filter"),children:B.graph3&&Object.keys(B.graph3).map(t=>e.jsx(Ct,{value:t,style:{color:"var(--text-color)",fontFamily:'"Public Sans", sans-serif !important'},children:n(t)},t))})]})}),e.jsx("button",{onClick:rt,className:"btn btn-outline-primary btn-lg mx-0 d-flex align-items-center",children:e.jsx(ft,{})})]}),e.jsx("div",{style:{position:"relative",width:"100%"},children:He&&e.jsx("div",{style:{top:"100%",left:0,width:"100%",backgroundColor:"white",marginBottom:"10px"},children:e.jsx("input",{type:"text",placeholder:"Search...",value:M,onChange:t=>Oe(t.target.value),style:{padding:"10px 25px 5px 15px",fontSize:"16px",borderRadius:"5px",border:"1px solid #ccc",color:"#272626",width:"100%"}})})}),de?e.jsx("div",{style:{borderRadius:"10px"},children:Ke.map((t,o)=>e.jsx("div",{style:{marginBottom:"20px",padding:"10px",border:"1px solid rgb(230, 220, 220)",borderRadius:"5px",backgroundColor:u==="dark"?"#272626":"#f9f9f9",borderLeft:"5px solid var(--driver-primary)",cursor:"pointer"},onClick:()=>ve(t.MobileNo,t.VehicleNo,t.CustomerName),children:Ce.map((a,f)=>{const r=t[a.accessor],s=X.includes(a.accessor),p=a.accessor==="Name"&&Array.isArray(r)&&r.length>1||a.accessor==="VehicleNo"&&Array.isArray(r)&&r.length>1;if(f===0)return e.jsxs("div",{style:{marginBottom:"5px",display:"flex",flexDirection:"row",alignItems:"center",padding:"10px 10px",borderBottom:"1px solid var(--driver-primary)"},children:[e.jsx("strong",{children:a.Header}),e.jsx("div",{style:{textAlign:"right",marginLeft:"2px"},children:o+1})]},a.accessor);if(a.accessor==="Last Visit"){const m=r===0?"Today":`${r} ${n("days ago")}`;return e.jsxs("div",{style:{marginBottom:"5px",display:"flex",flexDirection:"row",alignItems:"center",padding:"10px 10px",justifyContent:"space-between",borderBottom:"1px solid #8080803b"},children:[e.jsx("strong",{children:a.Header}),e.jsx("div",{style:{textAlign:"right"},children:m})]},a.accessor)}return e.jsxs("div",{style:{marginBottom:"5px",display:"flex",flexDirection:"row",alignItems:"center",padding:"10px 10px",justifyContent:"space-between",borderBottom:"1px solid #8080803b"},children:[e.jsx("strong",{children:a.Header})," ",e.jsxs("div",{style:{textAlign:"right"},children:[p&&!s?r[0].substring(0,10):Array.isArray(r)?r.join(", "):r,p&&e.jsx("button",{onClick:m=>{m.stopPropagation(),Qe(a)},style:{border:"none",background:"none",color:"grey",textDecoration:"underline",cursor:"pointer"},children:s?"less":"more"})]})]},a.accessor)})},o))}):e.jsx("div",{style:{overflowX:"auto",overflowY:"auto",maxHeight:"400px"},children:e.jsxs("table",{className:`${u=="dark"?d.CustomerProfilingTable:""}`,...We(),style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ccc",borderRadius:"5px"},children:[e.jsx("thead",{children:Ge.map(t=>e.jsx("tr",{...t.getHeaderGroupProps(),style:{backgroundColor:"#f2f2f2"},children:t.headers.map(o=>e.jsxs("th",{...o.getHeaderProps(o.getSortByToggleProps()),style:{padding:"10px",borderBottom:"2px solid #ccc",cursor:"pointer"},onClick:()=>Xe(o.id),children:[o.render("Header"),e.jsx("span",{style:{marginLeft:"5px",fontSize:"12px"},children:v.key===o.id&&(v.direction==="asc"?"🔼":"🔽")})]}))}))}),e.jsx("tbody",{...qe(),children:Ye.map(t=>(Ue(t),e.jsx("tr",{...t.getRowProps(),style:{borderBottom:"1px solid #ccc",backgroundColor:t.index%2===0?"#f9f9f9":"white",cursor:"pointer"},onClick:()=>ve(t.original.MobileNo,t.original.VehicleNo,t.original.Name),children:t.cells.map((o,a)=>e.jsx("td",{...o.getCellProps(),style:{padding:"10px"},children:a===0?o.value:o.render("Cell")}))})))})]})}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px"},children:[e.jsxs("div",{children:[!de&&e.jsx("button",{onClick:()=>H(0),disabled:$===0,style:{padding:"5px 10px",fontSize:"16px",borderRadius:"5px",border:"1px solid #ccc",marginRight:"5px",cursor:"pointer",marginBottom:"5px"},children:e.jsx(ht,{})}),e.jsx("button",{onClick:()=>H($-1),disabled:$===0,style:{padding:"5px 10px",fontSize:"16px",borderRadius:"5px",border:"1px solid #ccc",marginRight:"5px",cursor:"pointer"},children:e.jsx(je,{})}),e.jsx("button",{onClick:()=>H($+1),disabled:$>=K-1,style:{padding:"5px 10px",fontSize:"16px",borderRadius:"5px",border:"1px solid #ccc",marginRight:"5px",cursor:"pointer"},children:e.jsx(ut,{})}),!de&&e.jsx("button",{onClick:()=>H(K-1),disabled:$>=K-1,style:{padding:"5px 10px",fontSize:"16px",borderRadius:"5px",border:"1px solid #ccc",marginRight:"5px",cursor:"pointer"},children:e.jsx(gt,{})})]}),e.jsxs("div",{children:[e.jsxs("span",{style:{fontSize:"12px",marginRight:"10px"},children:[n("Page")," ",e.jsx("strong",{children:$+1})," of ",K]}),e.jsxs("span",{style:{fontSize:"12px"},children:["| ",n("Go to page"),":"," ",e.jsx("input",{type:"number",value:$+1,onChange:t=>{const o=t.target.value?Number(t.target.value)-1:0;H(o)},style:{padding:"5px",fontSize:"12px",borderRadius:"5px",color:"#272626",border:"1px solid #ccc",marginRight:"0px",width:"50px"}})]})]})]})]})]})})};export{so as default};
