import{r as o,u as k,j as e,x as I,F as R,y as A}from"./vendor-558e122b.js";import{c as g}from"./index-f87c0876.js";import{R as C}from"./index-f49dd30b.js";function B({countIncome:E,totalIncome:D,todaySales:v,alldata:q,selectedRange:F,officeId:M,adminStatus:N,salesCardData:c}){const[h,S]=o.useState({current7Days:[],previous7Days:[]}),[y,x]=o.useState(!0),[f,j]=o.useState(0),{t:l}=k();o.useEffect(()=>{async function n(){const t=c;if(Array.isArray(t)){const i=t.map(s=>({requestedDate:new Date(s.requestedDate),sales:s.totalIncome})),d=new Date,r=new Date(d);r.setDate(d.getDate()-7);const p=i.filter(s=>{const a=new Date(s.requestedDate);return a>=r&&a<=d}),u=new Date(r);u.setDate(r.getDate()-7);const m=i.filter(s=>{const a=new Date(s.requestedDate);return a>=u&&a<r}),T=p.reduce((s,a)=>s+a.sales,0),w=m.reduce((s,a)=>s+a.sales,0),z=Math.min((T-w)/w*100,100);j(z),S({current7Days:p,previous7Days:m})}else console.log("Invalid data format:",t)}n()},[c]);const W=["Su","Mo","Tu","We","Th","Fr","Sa"],b={grid:{left:12,right:12,top:10,bottom:20},legend:{show:!1,textStyle:{color:"white",fontSize:window.innerWidth<=768?8:12},data:["This Week","Previous Week"],top:20,left:"center",itemWidth:(window.innerWidth<=768,5),itemHeight:window.innerWidth<=768?8:10},xAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:"white",left:0,right:0},boundaryGap:!1,data:h.current7Days.map(n=>{const t=new Date(n.requestedDate);return W[t.getDay()]})},yAxis:{type:"value",show:!1},tooltip:{trigger:"axis",backgroundColor:"rgba(255, 255, 255, 0.3)",textStyle:{fontSize:window.innerWidth<=768?10:14,color:"rgba(100, 100, 100, 1)"},formatter:function(n){let t="<div>";return t+=`<div>${n[0].name}</div>`,n.forEach(i=>{t+='<div style="display: flex; align-items: center;">',t+=`<span style="color: ${i.color};margin-right: 5px;">●</span>`,t+=`<span style="font-weight: bold;">${i.seriesName}: ₹${i.value}</span>`,t+="</div>"}),t+="</div>",t}},series:[{data:h.current7Days.map(n=>n.sales),name:"This Week",type:"line",yAxisIndex:0,symbol:"none",itemStyle:{color:"green"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"green"},{offset:1,color:"rgba(0, 0, 0, 0)"}]}},smooth:!0,lineStyle:{width:3,shadowColor:"rgba(0, 0, 0, 0.3)",shadowBlur:5,shadowOffsetY:5}}]};return e.jsxs("div",{className:g.card3,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[e.jsxs("div",{className:g.cardHead,children:[e.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:l("Sales")}),e.jsx("span",{children:e.jsx(I,{size:50})})]}),e.jsx("div",{children:e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",width:"100%",height:"30px"},children:[e.jsxs("div",{className:"mb-0",style:{display:"flex",alignItems:"center"},children:[e.jsxs("span",{style:{marginRight:"5px",fontSize:window.innerWidth>600?"1.1rem":"0.8rem"},children:[" ",y?"7 "+l("days"):l("Today")]}),e.jsx("div",{children:e.jsxs("div",{style:{display:"flex"},children:[e.jsx("span",{style:{marginRight:"2px",marginTop:"6px",fontWeight:"bold",fontSize:window.innerWidth>600?".9rem":"0.7rem"},children:"₹"}),e.jsx("span",{style:{fontWeight:"bold",fontSize:window.innerWidth>600?"2.1rem":"1.7rem",marginRight:"5px"},children:y?D:v})]})})]}),e.jsx("div",{style:{display:window.innerWidth>600?"flex":"none",alignItems:"flex-start"},children:e.jsxs("div",{style:{backgroundColor:"rgba(144, 238, 144, 0.7)",padding:"2px 4px",borderRadius:"20px",display:"inline-flex",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:window.innerWidth>600?"0.9rem":"0.7rem",color:f>0?"yellow":"rgba(255,0,0,0.6)"}}),e.jsx("i",{style:{marginLeft:"0px"},children:f>0?e.jsx(R,{style:{fontSize:window.innerWidth>600?"0.9rem":"0.7rem",color:"yellow"}}):e.jsx(A,{style:{fontSize:window.innerWidth>600?"0.9rem":"0.7rem",color:"rgba(255,0,0,0.6)"}})})]})})]}),e.jsx("div",{style:{display:"flex"},children:e.jsx(C,{option:b,style:{height:"80%",width:"100%"}})})]})})]})}export{B as default};
